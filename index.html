<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>O'mely — Thời trang bền vững</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Jost:wght@300;400;500;600&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            cream:    '#FFFFFF',
            'cream-dark': '#F2F2F2',
            'brand-dark': '#1A1A1A',
            accent:   '#9E3D3D',
            'accent-light': '#B06060',
            secondary: '#E2E2E2',
            'secondary-dark': '#9A9A9A',
          },
          fontFamily: {
            heading: ['"Playfair Display"', 'serif'],
            body:    ['Jost', 'sans-serif'],
          },
        }
      }
    }
  </script>
  <style>
    *, *::before, *::after {
      font-style: normal !important;
      box-sizing: border-box;
    }
    body {
      font-family: 'Jost', sans-serif;
      background-color: #FFFFFF;
      color: #1A1A1A;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    /* Subtle noise overlay */
    body::after {
      content: '';
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 9999;
      opacity: 0.008;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='300'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='300' height='300' filter='url(%23n)'/%3E%3C/svg%3E");
      background-size: 200px 200px;
    }
    h1,h2,h3,h4,h5,h6,.font-heading {
      font-family: 'Playfair Display', serif;
      font-style: normal !important;
    }

    /* === NAVBAR === */
    #navbar {
      transition: background-color 0.4s ease, box-shadow 0.4s ease;
    }
    #navbar.scrolled {
      background-color: rgba(255,255,255,0.97);
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
    }

    /* === PAGE TRANSITIONS === */
    .page-section { animation: pgFade 0.45s ease; }
    @keyframes pgFade {
      from { opacity: 0; transform: translateY(10px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    /* === HERO ANIMATIONS === */
    .h1 { animation: hReveal 0.85s cubic-bezier(0.22,1,0.36,1) 0.05s forwards; opacity: 0; }
    .h2 { animation: hReveal 0.85s cubic-bezier(0.22,1,0.36,1) 0.2s  forwards; opacity: 0; }
    .h3 { animation: hReveal 0.85s cubic-bezier(0.22,1,0.36,1) 0.35s forwards; opacity: 0; }
    .h4 { animation: hReveal 0.85s cubic-bezier(0.22,1,0.36,1) 0.5s  forwards; opacity: 0; }
    @keyframes hReveal {
      from { opacity: 0; transform: translateY(28px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    /* === BUTTONS === */
    .btn-primary {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      background-color: #1A1A1A;
      color: #FFFFFF;
      padding: 14px 36px;
      letter-spacing: 0.12em;
      font-family: 'Jost', sans-serif;
      font-weight: 500;
      font-size: 11px;
      text-transform: uppercase;
      border: none;
      cursor: pointer;
      transition: background-color 0.25s ease, transform 0.15s ease;
      text-decoration: none;
    }
    .btn-primary:hover  { background-color: #9E3D3D; }
    .btn-primary:active { transform: scale(0.97); }
    .btn-primary:focus-visible { outline: 2px solid #9E3D3D; outline-offset: 3px; }

    .btn-outline {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      background-color: transparent;
      color: #1A1A1A;
      padding: 13px 36px;
      letter-spacing: 0.12em;
      font-family: 'Jost', sans-serif;
      font-weight: 500;
      font-size: 11px;
      text-transform: uppercase;
      border: 1px solid #1A1A1A;
      cursor: pointer;
      transition: background-color 0.25s ease, color 0.25s ease, transform 0.15s ease;
      text-decoration: none;
    }
    .btn-outline:hover  { background-color: #1A1A1A; color: #FFFFFF; }
    .btn-outline:active { transform: scale(0.97); }
    .btn-outline:focus-visible { outline: 2px solid #9E3D3D; outline-offset: 3px; }

    /* === NAV LINKS === */
    .nav-link {
      position: relative;
      font-family: 'Jost', sans-serif;
      font-size: 11px;
      letter-spacing: 0.14em;
      text-transform: uppercase;
      color: #1A1A1A;
      text-decoration: none;
      transition: color 0.2s ease;
    }
    .nav-link::after {
      content: '';
      position: absolute;
      bottom: -3px; left: 0;
      width: 0; height: 1px;
      background-color: #9E3D3D;
      transition: width 0.3s ease;
    }
    .nav-link:hover::after,
    .nav-link.active::after { width: 100%; }
    .nav-link.active         { color: #9E3D3D; }
    .nav-link:focus-visible  { outline: 2px solid #9E3D3D; outline-offset: 4px; }

    /* === PRODUCT CARDS === */
    .product-card { transition: transform 0.35s cubic-bezier(0.25,0.46,0.45,0.94); }
    .product-card:hover { transform: translateY(-5px); }
    .product-card:hover .card-img { transform: scale(1.04); }
    .card-img { transition: transform 0.6s cubic-bezier(0.25,0.46,0.45,0.94); }
    .card-overlay { opacity: 0; transition: opacity 0.3s ease; }
    .product-card:hover .card-overlay { opacity: 1; }
    .card-img-wrap { overflow: hidden; }

    /* === FILTER BUTTONS === */
    .filter-btn {
      font-family: 'Jost', sans-serif;
      font-size: 11px;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      padding: 8px 20px;
      border: 1px solid #E2E2E2;
      background: transparent;
      cursor: pointer;
      color: #1A1A1A;
      transition: background-color 0.2s ease, color 0.2s ease, border-color 0.2s ease;
      white-space: nowrap;
    }
    .filter-btn:hover,
    .filter-btn.active {
      background-color: #1A1A1A;
      color: #FFFFFF;
      border-color: #1A1A1A;
    }
    .filter-btn:focus-visible { outline: 2px solid #9E3D3D; outline-offset: 2px; }

    /* === SIZE BUTTONS === */
    .size-btn {
      width: 44px; height: 44px;
      border: 1px solid #E2E2E2;
      background: transparent;
      font-family: 'Jost', sans-serif;
      font-size: 12px;
      cursor: pointer;
      transition: border-color 0.2s ease, background-color 0.2s ease, color 0.2s ease;
    }
    .size-btn:hover { border-color: #9E3D3D; }
    .size-btn.selected { background-color: #1A1A1A; color: #FFFFFF; border-color: #1A1A1A; }
    .size-btn:focus-visible { outline: 2px solid #9E3D3D; outline-offset: 2px; }

    /* === TABS === */
    .tab-btn {
      font-family: 'Jost', sans-serif;
      font-size: 11px;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      padding: 12px 22px;
      background: transparent;
      cursor: pointer;
      border: none;
      border-bottom: 2px solid transparent;
      color: #9A9A9A;
      transition: color 0.2s ease, border-color 0.2s ease;
    }
    .tab-btn.active { color: #1A1A1A; border-bottom-color: #9E3D3D; }
    .tab-content { display: none; }
    .tab-content.active { display: block; }

    /* === QTY BUTTONS === */
    .qty-btn {
      width: 38px; height: 38px;
      border: 1px solid #E2E2E2;
      background: transparent;
      cursor: pointer;
      display: flex; align-items: center; justify-content: center;
      font-family: 'Jost', sans-serif;
      font-size: 20px; line-height: 1;
      color: #1A1A1A;
      transition: background-color 0.2s ease;
      user-select: none;
    }
    .qty-btn:hover { background-color: #F2F2F2; }

    /* === CART SIDEBAR === */
    #cart-sidebar {
      transition: transform 0.38s cubic-bezier(0.25,0.46,0.45,0.94);
    }

    /* === MOBILE MENU === */
    #mobile-menu {
      transform: translateX(100%);
      transition: transform 0.35s cubic-bezier(0.25,0.46,0.45,0.94);
    }
    #mobile-menu.open { transform: translateX(0); }

    /* === CART BADGE === */
    .cart-badge {
      position: absolute; top: -6px; right: -8px;
      width: 18px; height: 18px;
      background-color: #1A1A1A;
      color: #FFFFFF;
      font-size: 9px;
      display: flex; align-items: center; justify-content: center;
      font-family: 'Jost', sans-serif;
      font-weight: 600;
    }

    /* === TIMELINE === */
    .timeline-dot::before {
      content: '';
      position: absolute;
      left: -29px; top: 4px;
      width: 11px; height: 11px;
      border: 2px solid #9E3D3D;
      border-radius: 50%;
      background: #FFFFFF;
    }
    .timeline-dot-dark::before {
      background: #F2F2F2;
    }

    /* === DECORATIVE === */
    .deco-line {
      width: 36px; height: 1px;
      background-color: #9E3D3D;
      display: inline-block;
      flex-shrink: 0;
    }

    /* === SCROLLBAR === */
    ::-webkit-scrollbar { width: 4px; }
    ::-webkit-scrollbar-track { background: #FFFFFF; }
    ::-webkit-scrollbar-thumb { background: #E2E2E2; border-radius: 2px; }
    ::-webkit-scrollbar-thumb:hover { background: #9E3D3D; }

    /* === TOAST === */
    .toast {
      position: fixed; bottom: 28px; right: 28px; z-index: 9500;
      background: #FFFFFF; border-left: 3px solid #9E3D3D;
      padding: 14px 20px; box-shadow: 0 4px 24px rgba(26,26,26,0.14);
      font-family: 'Jost', sans-serif; font-size: 13px; color: #1A1A1A;
      display: flex; align-items: center; gap: 10px;
      animation: toastIn 0.3s cubic-bezier(0.22,1,0.36,1);
    }
    @keyframes toastIn { from { opacity:0; transform: translateY(16px); } to { opacity:1; transform: none; } }

    /* === USER DROPDOWN === */
    .user-dropdown {
      display: none; position: absolute; top: calc(100% + 10px); right: 0;
      background: #FFFFFF; min-width: 176px;
      box-shadow: 0 8px 32px rgba(26,26,26,0.12); z-index: 300;
      border-top: 2px solid #9E3D3D;
    }
    .user-dropdown.open { display: block; }
    .user-dropdown a, .user-dropdown button {
      display: block; width: 100%; text-align: left;
      padding: 11px 18px; font-family: 'Jost', sans-serif;
      font-size: 12px; letter-spacing: 0.08em; text-transform: uppercase;
      color: #1A1A1A; background: none; border: none; cursor: pointer;
      text-decoration: none; transition: background-color 0.15s ease;
    }
    .user-dropdown a:hover, .user-dropdown button:hover { background: #F2F2F2; }

    /* === CHECKOUT STEPS === */
    .checkout-step { display: none; }
    .checkout-step.active { display: block; }
    .step-indicator-dot {
      width: 30px; height: 30px; border-radius: 50%;
      border: 1.5px solid #E2E2E2; display: flex;
      align-items: center; justify-content: center;
      font-family: 'Jost', sans-serif; font-size: 11px;
      color: #9A9A9A; transition: all 0.2s ease;
    }
    .step-indicator-dot.active { background: #1A1A1A; color: #FFFFFF; border-color: #1A1A1A; }
    .step-indicator-dot.done   { background: #9E3D3D; color: #FFFFFF; border-color: #9E3D3D; }
    .step-connector { flex: 1; height: 1px; background: #E2E2E2; margin: 0 8px; }
    .step-connector.done { background: #9E3D3D; }

    /* === AUTH VIEWS === */
    .auth-view { display: none; }
    .auth-view.active { display: block; }

    /* === FORM INPUTS === */
    .form-input {
      width: 100%; padding: 12px 14px;
      background: transparent; border: 1px solid #E2E2E2;
      font-family: 'Jost', sans-serif; font-size: 14px; color: #1A1A1A;
      outline: none; transition: border-color 0.2s ease;
    }
    .form-input:focus { border-color: #9E3D3D; }
    .form-input::placeholder { color: #9A9A9A; }
    .form-label {
      display: block; font-family: 'Jost', sans-serif;
      font-size: 12px; letter-spacing: 0.14em; text-transform: uppercase;
      color: #9E3D3D; margin-bottom: 6px;
    }

    /* === SEARCH OVERLAY === */
    #search-overlay {
      display: none; position: fixed; inset: 0; z-index: 9000;
      background: rgba(255,255,255,0.97); backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      flex-direction: column; align-items: center;
      padding-top: 120px;
    }
    #search-overlay.open { display: flex; }

    /* === SCOPED POLICY / ACCOUNT TABS === */
    .policy-tab-content { display: none; }
    .policy-tab-content.active { display: block; }
    .account-tab-content { display: none; }
    .account-tab-content.active { display: block; }

    /* === WISHLIST HEART === */
    .wish-btn { background: none; border: none; cursor: pointer; padding: 6px; line-height: 1; }
    .wish-btn svg { transition: fill 0.2s ease, stroke 0.2s ease; }
    .wish-btn.active svg { fill: #9E3D3D; stroke: #9E3D3D; }

    /* === PAYMENT RADIO === */
    .pay-option {
      border: 1px solid #E2E2E2; padding: 16px 18px;
      cursor: pointer; transition: border-color 0.2s ease;
      display: flex; align-items: center; gap: 12px;
    }
    .pay-option.selected { border-color: #9E3D3D; }
    .pay-radio {
      width: 18px; height: 18px; border-radius: 50%;
      border: 1.5px solid #E2E2E2; flex-shrink: 0;
      display: flex; align-items: center; justify-content: center;
      transition: border-color 0.2s ease;
    }
    .pay-option.selected .pay-radio { border-color: #9E3D3D; }
    .pay-option.selected .pay-radio::after {
      content: ''; display: block; width: 8px; height: 8px;
      border-radius: 50%; background: #9E3D3D;
    }
  </style>
</head>
<body class="bg-white">

  <!-- ===== NAVBAR ===== -->
  <nav id="navbar" class="fixed top-0 left-0 right-0 z-50 bg-white" style="border-bottom:1px solid #E2E2E2; height:72px;">
    <div class="flex items-center justify-between h-full px-6 md:px-10">

      <!-- Left: Hamburger + Logo -->
      <div class="flex items-center gap-5">
        <button onclick="toggleMobileMenu()" aria-label="Menu"
                class="p-1 hover:opacity-50 transition-opacity duration-200 focus-visible:outline-none">
          <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="#1A1A1A" stroke-width="1.5" stroke-linecap="round">
            <line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="18" x2="21" y2="18"/>
          </svg>
        </button>
        <a href="#home" onclick="navigateTo('home');return false;"
           class="font-heading font-semibold text-brand-dark hover:opacity-70 transition-opacity duration-200 focus-visible:outline-none"
           style="font-size:1.45rem; letter-spacing:0.04em;">O'mely<sup style="font-size:0.42em; vertical-align:super; font-family:'Jost',sans-serif; letter-spacing:0;">™</sup></a>
      </div>

      <!-- Center: Nav links (desktop only) -->
      <div class="hidden md:flex items-center gap-12 absolute left-1/2 -translate-x-1/2">
        <a href="#home"  class="nav-link" onclick="navigateTo('home');return false;"  data-page="home">Trang chủ</a>
        <a href="#shop"  class="nav-link" onclick="navigateTo('shop');return false;"  data-page="shop">Cửa hàng</a>
        <a href="#about" class="nav-link" onclick="navigateTo('about');return false;" data-page="about">Về chúng tôi</a>
      </div>

      <!-- Right: Search | Divider | Auth | Divider | Cart -->
      <div class="flex items-center gap-4">
        <!-- Search -->
        <button onclick="toggleSearch()" aria-label="Tìm kiếm"
                class="hidden md:flex p-1 hover:opacity-50 transition-opacity duration-200 focus-visible:outline-none">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#1A1A1A" stroke-width="1.5" stroke-linecap="round">
            <circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/>
          </svg>
        </button>

        <!-- Divider -->
        <div class="hidden md:block w-px h-[18px]" style="background:#E2E2E2;"></div>

        <!-- Auth button -->
        <div class="hidden md:block relative">
          <button id="btn-login" onclick="navigateTo('auth')"
                  class="font-body text-[11px] tracking-[0.12em] uppercase text-brand-dark hover:text-accent transition-colors duration-200">
            Đăng nhập
          </button>
          <button id="btn-user" onclick="toggleUserDropdown()" class="hidden items-center gap-2 hover:opacity-70 transition-opacity duration-200">
            <div id="user-avatar" class="w-7 h-7 rounded-full bg-accent flex items-center justify-content text-cream font-body text-[11px] font-medium" style="display:flex;align-items:center;justify-content:center;">A</div>
            <span id="user-name-nav" class="font-body text-[11px] tracking-[0.08em] uppercase text-brand-dark max-w-[90px] truncate"></span>
          </button>
          <div id="user-dropdown" class="user-dropdown">
            <a href="#account" onclick="navigateTo('account');closeUserDropdown();return false;">Tài khoản</a>
            <a href="#wishlist" onclick="navigateTo('wishlist');closeUserDropdown();return false;">Yêu thích</a>
            <button onclick="doLogout()">Đăng xuất</button>
          </div>
        </div>

        <!-- Divider -->
        <div class="hidden md:block w-px h-[18px]" style="background:#E2E2E2;"></div>

        <!-- Cart -->
        <button onclick="toggleCart()" aria-label="Giỏ hàng"
                class="relative p-1 hover:opacity-50 transition-opacity duration-200 focus-visible:outline-none">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#1A1A1A" stroke-width="1.5" stroke-linecap="round">
            <path d="M6 2L3 6v14a2 2 0 002 2h14a2 2 0 002-2V6l-3-4z"/><line x1="3" y1="6" x2="21" y2="6"/>
            <path d="M16 10a4 4 0 01-8 0"/>
          </svg>
          <span id="cart-badge" class="cart-badge hidden">0</span>
        </button>
      </div>
    </div>
  </nav>

  <!-- ===== MOBILE MENU ===== -->
  <div id="mobile-menu" class="fixed top-0 right-0 bottom-0 w-72 bg-cream z-[60] flex flex-col px-8 pt-16 pb-10"
       style="box-shadow: -8px 0 40px rgba(26,26,26,0.1);">
    <button onclick="toggleMobileMenu()" aria-label="Đóng"
            class="absolute top-5 right-6 p-1 hover:opacity-50 transition-opacity duration-200 focus-visible:outline-none">
      <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="#1A1A1A" stroke-width="1.5" stroke-linecap="round">
        <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
      </svg>
    </button>
    <p class="font-heading font-semibold text-2xl text-brand-dark mb-10">O'mely</p>
    <nav class="flex flex-col gap-7">
      <a href="#home"  class="nav-link text-base" onclick="navigateTo('home');toggleMobileMenu();return false;">Trang chủ</a>
      <a href="#shop"  class="nav-link text-base" onclick="navigateTo('shop');toggleMobileMenu();return false;">Cửa hàng</a>
      <a href="#about" class="nav-link text-base" onclick="navigateTo('about');toggleMobileMenu();return false;">Về chúng tôi</a>
    </nav>
    <div class="mt-auto">
      <p class="font-body text-[11px] tracking-[0.12em] uppercase text-secondary-dark">Thời trang bền vững</p>
    </div>
  </div>
  <div id="mobile-overlay" class="fixed inset-0 bg-brand-dark/20 z-[55] hidden" onclick="toggleMobileMenu()"></div>

  <!-- ============================================================ -->
  <!-- PAGE: HOME                                                    -->
  <!-- ============================================================ -->
  <section id="home" class="page-section">

    <!-- ===== HORIZONTAL PRODUCT SHOWCASE (Promax style) ===== -->
    <div style="padding-top:72px; border-bottom:1px solid #E2E2E2;">
      <div class="grid grid-cols-2 md:grid-cols-4" style="border-top:1px solid #E2E2E2;">

        <!-- Product 1 -->
        <div class="cursor-pointer overflow-hidden group" style="border-right:1px solid #E2E2E2;"
             onclick="showProduct({id:1,name:'Áo linen tối giản',price:'890.000',numPrice:890000,category:'ao',img:'https://images.unsplash.com/photo-1434389677669-e08b4cac3105?w=400&h=533&fit=crop&q=80',badge:'Mới'})">
          <div class="px-5 pt-5 pb-4">
            <h3 class="font-body font-semibold leading-tight text-brand-dark mb-1" style="font-size:1.05rem;">Áo linen<br>tối giản</h3>
            <p class="font-body text-sm" style="color:#9A9A9A;">Áo</p>
          </div>
          <div class="overflow-hidden" style="background:#F2F2F2;">
            <img src="https://images.unsplash.com/photo-1434389677669-e08b4cac3105?w=520&h=680&fit=crop&q=80"
                 alt="Áo linen"
                 class="w-full object-cover transition-transform duration-700 group-hover:scale-105"
                 style="aspect-ratio:3/4;">
          </div>
        </div>

        <!-- Product 2 -->
        <div class="cursor-pointer overflow-hidden group" style="border-right:1px solid #E2E2E2;"
             onclick="showProduct({id:2,name:'Áo blouse lụa',price:'1.290.000',numPrice:1290000,category:'ao',img:'https://images.unsplash.com/photo-1485462537746-965f33f7f6a7?w=400&h=533&fit=crop&q=80'})">
          <div class="px-5 pt-5 pb-4">
            <h3 class="font-body font-semibold leading-tight text-brand-dark mb-1" style="font-size:1.05rem;">Áo blouse<br>lụa</h3>
            <p class="font-body text-sm" style="color:#9A9A9A;">Áo</p>
          </div>
          <div class="overflow-hidden" style="background:#F2F2F2;">
            <img src="https://images.unsplash.com/photo-1485462537746-965f33f7f6a7?w=520&h=680&fit=crop&q=80"
                 alt="Áo blouse lụa"
                 class="w-full object-cover transition-transform duration-700 group-hover:scale-105"
                 style="aspect-ratio:3/4;">
          </div>
        </div>

        <!-- Product 3 -->
        <div class="cursor-pointer overflow-hidden group" style="border-right:1px solid #E2E2E2;"
             onclick="showProduct({id:3,name:'Áo sơ mi organic',price:'750.000',numPrice:750000,category:'ao',img:'https://images.unsplash.com/photo-1598033129183-c4f50c736f10?w=400&h=533&fit=crop&q=80',badge:'Bestseller'})">
          <div class="px-5 pt-5 pb-4">
            <h3 class="font-body font-semibold leading-tight text-brand-dark mb-1" style="font-size:1.05rem;">Áo sơ mi<br>organic</h3>
            <p class="font-body text-sm" style="color:#9A9A9A;">Áo</p>
          </div>
          <div class="overflow-hidden" style="background:#F2F2F2;">
            <img src="https://images.unsplash.com/photo-1598033129183-c4f50c736f10?w=520&h=680&fit=crop&q=80"
                 alt="Áo sơ mi organic"
                 class="w-full object-cover transition-transform duration-700 group-hover:scale-105"
                 style="aspect-ratio:3/4;">
          </div>
        </div>

        <!-- Product 4 -->
        <div class="cursor-pointer overflow-hidden group"
             onclick="showProduct({id:4,name:'Áo crop linen',price:'720.000',numPrice:720000,category:'ao',img:'https://images.unsplash.com/photo-1551163943-3f7e43fe1e1e?w=400&h=533&fit=crop&q=80',badge:'Mới'})">
          <div class="px-5 pt-5 pb-4">
            <h3 class="font-body font-semibold leading-tight text-brand-dark mb-1" style="font-size:1.05rem;">Áo crop<br>linen</h3>
            <p class="font-body text-sm" style="color:#9A9A9A;">Áo</p>
          </div>
          <div class="overflow-hidden" style="background:#F2F2F2;">
            <img src="https://images.unsplash.com/photo-1551163943-3f7e43fe1e1e?w=520&h=680&fit=crop&q=80"
                 alt="Áo crop linen"
                 class="w-full object-cover transition-transform duration-700 group-hover:scale-105"
                 style="aspect-ratio:3/4;">
          </div>
        </div>

      </div>
    </div>

    <!-- ===== EDITORIAL SECTION (Promax big-type style) ===== -->
    <div class="flex flex-col md:flex-row md:items-end px-6 md:px-10 py-14 md:py-20" style="border-bottom:1px solid #E2E2E2;">

      <!-- Left: Massive bold type -->
      <div class="flex-1 mb-10 md:mb-0">
        <h1 style="font-family:'Jost',sans-serif; font-weight:900; line-height:0.88; text-transform:uppercase; letter-spacing:-0.025em; font-size:clamp(3.8rem,10vw,9.5rem);">
          <span style="color:#1A1A1A;">BỘ SƯU TẬP</span><br>
          <span style="color:#CCCCCC;">THU ĐÔNG</span><br>
          <span style="color:#1A1A1A;">O'MELY</span>
        </h1>
      </div>

      <!-- Right: Certifications + CTA + description -->
      <div class="md:flex flex-col items-end gap-7 md:ml-14 md:pb-1 hidden" style="max-width:380px;">
        <!-- Cert logos row -->
        <div class="flex items-center gap-8">
          <span class="font-body font-medium tracking-[0.22em] uppercase" style="font-size:0.7rem; color:#9A9A9A;">GOTS</span>
          <span class="font-body font-medium tracking-[0.22em] uppercase" style="font-size:0.7rem; color:#9A9A9A;">Fair Trade</span>
          <span class="font-body font-medium tracking-[0.22em] uppercase" style="font-size:0.7rem; color:#9A9A9A;">OEKO-TEX</span>
        </div>

        <!-- CTA -->
        <button onclick="navigateTo('shop')"
                class="flex items-center gap-3 font-body font-semibold uppercase tracking-[0.18em] text-brand-dark hover:opacity-50 transition-opacity duration-200"
                style="font-size:0.8rem;">
          KHÁM PHÁ BỘ SƯU TẬP
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
        </button>

        <!-- Description -->
        <p class="font-body leading-relaxed text-right" style="font-size:0.9rem; color:#9A9A9A;">
          Thời trang bền vững lấy cảm hứng từ vẻ đẹp tự nhiên của Việt Nam, mỗi sản phẩm đều mang cam kết với con người và hành tinh.
        </p>
      </div>

      <!-- Mobile CTA -->
      <div class="md:hidden">
        <button onclick="navigateTo('shop')" class="btn-primary">Khám phá bộ sưu tập</button>
      </div>
    </div>

    <!-- SUSTAINABILITY SECTION (dark) -->
    <div class="py-24 px-6 md:px-14" style="background:#1A1A1A;">
      <div class="container mx-auto">
        <div class="text-center mb-16">
          <p class="font-body text-[11px] tracking-[0.22em] uppercase text-accent mb-4">Cam kết của chúng tôi</p>
          <h2 class="font-heading font-light text-cream" style="font-size:clamp(2rem,4vw,2.8rem);">
            Bền vững không chỉ là xu hướng
          </h2>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-14">
          <div class="text-center group">
            <div class="w-14 h-14 rounded-full border flex items-center justify-center mx-auto mb-6 transition-colors duration-300"
                 style="border-color:rgba(158,61,61,0.4);"
                 onmouseenter="this.style.borderColor='#9E3D3D'" onmouseleave="this.style.borderColor='rgba(158,61,61,0.4)'">
              <svg width="26" height="26" viewBox="0 0 24 24" fill="none" stroke="#9E3D3D" stroke-width="1.3" stroke-linecap="round">
                <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
              </svg>
            </div>
            <h3 class="font-heading text-2xl font-medium text-cream mb-3">Vải hữu cơ</h3>
            <p class="font-body font-light text-[15px] leading-relaxed" style="color:rgba(255,255,255,0.82);">
              100% cotton hữu cơ chứng nhận GOTS, không thuốc nhuộm độc hại, an toàn cho da và môi trường.
            </p>
          </div>
          <div class="text-center group">
            <div class="w-14 h-14 rounded-full border flex items-center justify-center mx-auto mb-6 transition-colors duration-300"
                 style="border-color:rgba(158,61,61,0.4);"
                 onmouseenter="this.style.borderColor='#9E3D3D'" onmouseleave="this.style.borderColor='rgba(158,61,61,0.4)'">
              <svg width="26" height="26" viewBox="0 0 24 24" fill="none" stroke="#9E3D3D" stroke-width="1.3" stroke-linecap="round">
                <path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/>
                <circle cx="9" cy="7" r="4"/>
                <path d="M23 21v-2a4 4 0 00-3-3.87M16 3.13a4 4 0 010 7.75"/>
              </svg>
            </div>
            <h3 class="font-heading text-2xl font-medium text-cream mb-3">Sản xuất công bằng</h3>
            <p class="font-body font-light text-[15px] leading-relaxed" style="color:rgba(255,255,255,0.82);">
              Đối tác được kiểm định Fair Trade. Người thợ được trả lương xứng đáng trong điều kiện làm việc an toàn.
            </p>
          </div>
          <div class="text-center group">
            <div class="w-14 h-14 rounded-full border flex items-center justify-center mx-auto mb-6 transition-colors duration-300"
                 style="border-color:rgba(158,61,61,0.4);"
                 onmouseenter="this.style.borderColor='#9E3D3D'" onmouseleave="this.style.borderColor='rgba(158,61,61,0.4)'">
              <svg width="26" height="26" viewBox="0 0 24 24" fill="none" stroke="#9E3D3D" stroke-width="1.3" stroke-linecap="round">
                <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z"/>
                <circle cx="12" cy="10" r="3"/>
              </svg>
            </div>
            <h3 class="font-heading text-2xl font-medium text-cream mb-3">Đóng gói tái chế</h3>
            <p class="font-body font-light text-[15px] leading-relaxed" style="color:rgba(255,255,255,0.82);">
              Toàn bộ bao bì từ vật liệu tái chế hoặc phân hủy sinh học. Không nhựa, không rác thải không cần thiết.
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- BRAND STORY SNIPPET -->
    <div class="py-24 px-6 md:px-14">
      <div class="container mx-auto grid md:grid-cols-2 gap-14 items-center">
        <div class="relative">
          <div class="aspect-[4/5] overflow-hidden">
            <img src="https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=560&h=700&fit=crop&q=80" alt="Câu chuyện O'mely" class="w-full h-full object-cover">
            <div class="absolute inset-0 pointer-events-none"
                 style="background:linear-gradient(135deg,rgba(158,61,61,0.08),transparent 60%);"></div>
          </div>
          <div class="absolute -bottom-5 -right-5 hidden md:block select-none pointer-events-none">
            <p class="font-heading font-light leading-none" style="font-size:9rem;color:rgba(212,197,176,0.35);">03</p>
          </div>
        </div>
        <div class="md:pl-6">
          <p class="font-body text-[11px] tracking-[0.22em] uppercase text-accent mb-4 flex items-center gap-3">
            <span class="deco-line"></span>Về O'mely
          </p>
          <h2 class="font-heading font-light text-brand-dark mb-6 leading-tight" style="font-size:clamp(2rem,4vw,2.8rem);">
            Được tạo ra<br>từ tình yêu<br>với trái đất
          </h2>
          <p class="font-body font-light text-[15px] leading-relaxed text-brand-dark/65 mb-4">
            Năm 2021, O'mely ra đời từ một câu hỏi giản dị: "Tại sao chúng ta không thể mặc đẹp mà vẫn sống có trách nhiệm?"
          </p>
          <p class="font-body font-light text-[15px] leading-relaxed text-brand-dark/65 mb-10">
            Ba năm sau, chúng tôi tự hào là thương hiệu thời trang bền vững được yêu thích tại Việt Nam với hơn 10.000 khách hàng tin tưởng.
          </p>
          <button onclick="navigateTo('about')" class="btn-outline">Đọc thêm về chúng tôi</button>
        </div>
      </div>
    </div>

    <!-- QUOTE BANNER -->
    <div class="py-16 px-6 md:px-14 text-center border-y border-secondary/50" style="background:rgba(158,61,61,0.06);">
      <p class="font-heading font-light text-brand-dark max-w-3xl mx-auto leading-relaxed"
         style="font-size:clamp(1.4rem,3vw,2.2rem);">
        "Thời trang tốt nhất là thời trang bạn cảm thấy tốt khi mặc — cả về ngoại hình lẫn lương tâm."
      </p>
      <p class="font-body text-[11px] tracking-[0.16em] uppercase text-accent mt-6">— Nguyễn Ly, Nhà sáng lập O'mely</p>
    </div>

    <!-- FOOTER -->
    <footer style="background:#1A1A1A;" class="pt-16 pb-8 px-6 md:px-14">
      <div class="container mx-auto">
        <div class="grid grid-cols-2 md:grid-cols-4 gap-10 mb-14">
          <div class="col-span-2 md:col-span-1">
            <p class="font-heading font-semibold text-2xl text-cream mb-4">O'mely</p>
            <p class="font-body font-light text-[13px] leading-relaxed mb-6" style="color:rgba(255,255,255,0.45);">Thời trang bền vững cho cuộc sống có ý thức.</p>
            <div class="flex gap-3">
              <a href="#" aria-label="Facebook"
                 class="w-8 h-8 flex items-center justify-center transition-colors duration-200 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-accent"
                 style="border:1px solid rgba(255,255,255,0.18);"
                 onmouseenter="this.style.borderColor='#9E3D3D'" onmouseleave="this.style.borderColor='rgba(255,255,255,0.18)'">
                <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="#FFFFFF" stroke-width="1.5" stroke-linecap="round"><path d="M18 2h-3a5 5 0 00-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 011-1h3z"/></svg>
              </a>
              <a href="#" aria-label="Instagram"
                 class="w-8 h-8 flex items-center justify-center transition-colors duration-200 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-accent"
                 style="border:1px solid rgba(255,255,255,0.18);"
                 onmouseenter="this.style.borderColor='#9E3D3D'" onmouseleave="this.style.borderColor='rgba(255,255,255,0.18)'">
                <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="#FFFFFF" stroke-width="1.5" stroke-linecap="round"><rect x="2" y="2" width="20" height="20" rx="5"/><path d="M16 11.37A4 4 0 1112.63 8 4 4 0 0116 11.37z"/><line x1="17.5" y1="6.5" x2="17.51" y2="6.5"/></svg>
              </a>
            </div>
          </div>
          <div>
            <p class="font-body text-[12px] tracking-[0.16em] uppercase text-accent mb-5">Khám phá</p>
            <ul class="space-y-3">
              <li><a href="#shop"  onclick="navigateTo('shop');return false;"  class="font-body font-light text-[13px] transition-colors duration-200 focus-visible:outline-none" style="color:rgba(255,255,255,0.5);" onmouseenter="this.style.color='#FFFFFF'" onmouseleave="this.style.color='rgba(255,255,255,0.5)'">Cửa hàng</a></li>
              <li><a href="#about" onclick="navigateTo('about');return false;" class="font-body font-light text-[13px] transition-colors duration-200 focus-visible:outline-none" style="color:rgba(255,255,255,0.5);" onmouseenter="this.style.color='#FFFFFF'" onmouseleave="this.style.color='rgba(255,255,255,0.5)'">Về chúng tôi</a></li>
              <li><a href="#" class="font-body font-light text-[13px] transition-colors duration-200 focus-visible:outline-none" style="color:rgba(255,255,255,0.5);" onmouseenter="this.style.color='#FFFFFF'" onmouseleave="this.style.color='rgba(255,255,255,0.5)'">Blog</a></li>
            </ul>
          </div>
          <div>
            <p class="font-body text-[12px] tracking-[0.16em] uppercase text-accent mb-5">Hỗ trợ</p>
            <ul class="space-y-3">
              <li><a href="#size-guide" onclick="navigateTo('size-guide');return false;" class="font-body font-light text-[13px] transition-colors duration-200" style="color:rgba(255,255,255,0.5);" onmouseenter="this.style.color='#FFFFFF'" onmouseleave="this.style.color='rgba(255,255,255,0.5)'">Hướng dẫn size</a></li>
              <li><a href="#policy" onclick="navigateTo('policy');setTimeout(()=>openPolicyTab('returns',document.getElementById('ptab-returns')),50);return false;" class="font-body font-light text-[13px] transition-colors duration-200" style="color:rgba(255,255,255,0.5);" onmouseenter="this.style.color='#FFFFFF'" onmouseleave="this.style.color='rgba(255,255,255,0.5)'">Chính sách đổi trả</a></li>
              <li><a href="#policy" onclick="navigateTo('policy');setTimeout(()=>openPolicyTab('shipping',document.getElementById('ptab-shipping')),50);return false;" class="font-body font-light text-[13px] transition-colors duration-200" style="color:rgba(255,255,255,0.5);" onmouseenter="this.style.color='#FFFFFF'" onmouseleave="this.style.color='rgba(255,255,255,0.5)'">Vận chuyển</a></li>
              <li><a href="#policy" onclick="navigateTo('policy');setTimeout(()=>openPolicyTab('privacy',document.getElementById('ptab-privacy')),50);return false;" class="font-body font-light text-[13px] transition-colors duration-200" style="color:rgba(255,255,255,0.5);" onmouseenter="this.style.color='#FFFFFF'" onmouseleave="this.style.color='rgba(255,255,255,0.5)'">Chính sách bảo mật</a></li>
            </ul>
          </div>
          <div>
            <p class="font-body text-[12px] tracking-[0.16em] uppercase text-accent mb-5">Đăng ký nhận tin</p>
            <p class="font-body font-light text-[13px] mb-4" style="color:rgba(255,255,255,0.45);">Nhận ưu đãi và cập nhật bộ sưu tập mới nhất.</p>
            <div class="flex">
              <input type="email" placeholder="Email của bạn"
                     class="flex-1 px-3 py-2 font-body text-[12px] outline-none transition-colors duration-200"
                     style="background:rgba(255,255,255,0.08);border:1px solid rgba(255,255,255,0.15);color:#FFFFFF;"
                     onfocus="this.style.borderColor='#9E3D3D'" onblur="this.style.borderColor='rgba(255,255,255,0.15)'">
              <button aria-label="Đăng ký"
                      class="px-3 py-2 transition-colors duration-200 focus-visible:outline-none"
                      style="background:#9E3D3D;"
                      onmouseenter="this.style.background='rgba(158,61,61,0.8)'" onmouseleave="this.style.background='#9E3D3D'">
                <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="#FFFFFF" stroke-width="1.5" stroke-linecap="round"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
              </button>
            </div>
          </div>
        </div>
        <div class="border-t flex flex-col md:flex-row justify-between items-center gap-3 pt-8" style="border-color:rgba(255,255,255,0.08);">
          <p class="font-body font-light text-[12px]" style="color:rgba(255,255,255,0.25);">© 2024 O'mely. Mọi quyền được bảo lưu.</p>
          <p class="font-body font-light text-[12px]" style="color:rgba(255,255,255,0.25);">Thiết kế bền vững — Sản xuất có trách nhiệm</p>
        </div>
      </div>
    </footer>
  </section>

  <!-- ============================================================ -->
  <!-- PAGE: SHOP                                                    -->
  <!-- ============================================================ -->
  <section id="shop" class="page-section hidden">
    <!-- Shop header -->
    <div class="pt-36 pb-14 px-6 md:px-14 bg-cream-dark">
      <div class="container mx-auto text-center">
        <p class="font-body text-[11px] tracking-[0.22em] uppercase text-accent mb-4">Bộ sưu tập</p>
        <h1 class="font-heading font-light text-brand-dark mb-4" style="font-size:clamp(2.5rem,5vw,3.8rem);">Áo</h1>
        <p class="font-body font-light text-[15px] text-brand-dark/60 max-w-md mx-auto">
          5 thiết kế áo từ vật liệu hữu cơ, tối giản và bền vững.
        </p>
      </div>
    </div>

    <!-- Product count bar -->
    <div class="border-b border-secondary py-4 px-6 md:px-14">
      <div class="container mx-auto">
        <span class="font-body text-[11px] tracking-[0.1em] uppercase text-secondary-dark">5 sản phẩm</span>
      </div>
    </div>

    <!-- Products grid -->
    <div class="py-14 px-6 md:px-14">
      <div class="container mx-auto">
        <div id="products-grid" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4 md:gap-6"></div>
      </div>
    </div>

    <!-- Mini footer -->
    <div style="background:#1A1A1A;" class="py-8 px-6 md:px-14">
      <div class="container mx-auto flex flex-col md:flex-row justify-between items-center gap-3">
        <p class="font-heading font-semibold text-xl text-cream">O'mely</p>
        <p class="font-body font-light text-[12px]" style="color:rgba(255,255,255,0.3);">© 2024 O'mely. Mọi quyền được bảo lưu.</p>
      </div>
    </div>
  </section>

  <!-- ============================================================ -->
  <!-- PAGE: PRODUCT DETAIL                                         -->
  <!-- ============================================================ -->
  <section id="product" class="page-section hidden">
    <div class="pt-28 pb-24 px-6 md:px-14">
      <div class="container mx-auto">
        <!-- Breadcrumb -->
        <nav class="flex items-center gap-2 mb-10 font-body text-[11px] tracking-[0.08em] uppercase text-secondary-dark">
          <a href="#home" onclick="navigateTo('home');return false;" class="hover:text-accent transition-colors duration-200">Trang chủ</a>
          <span>/</span>
          <a href="#shop" onclick="navigateTo('shop');return false;" class="hover:text-accent transition-colors duration-200">Cửa hàng</a>
          <span>/</span>
          <span id="product-breadcrumb" class="text-brand-dark">Sản phẩm</span>
        </nav>

        <div class="grid md:grid-cols-2 gap-12 lg:gap-20">
          <!-- Images -->
          <div>
            <div class="aspect-[3/4] bg-cream-dark overflow-hidden mb-3">
              <img id="product-main-img" src="" alt="Product" class="w-full h-full object-cover">
            </div>
            <div class="grid grid-cols-3 gap-2">
              <div class="aspect-[3/4] bg-cream-dark overflow-hidden cursor-pointer border-2 border-transparent transition-colors duration-200"
                   id="thumb-0" onclick="selectThumb(0)" style="" onmouseenter="highlightThumb(0)" onmouseleave="">
                <img id="thumb-img-0" src="" alt="" class="w-full h-full object-cover">
              </div>
              <div class="aspect-[3/4] bg-cream-dark overflow-hidden cursor-pointer border-2 border-transparent transition-colors duration-200"
                   id="thumb-1" onclick="selectThumb(1)" onmouseenter="highlightThumb(1)">
                <img id="thumb-img-1" src="" alt="" class="w-full h-full object-cover">
              </div>
              <div class="aspect-[3/4] bg-cream-dark overflow-hidden cursor-pointer border-2 border-transparent transition-colors duration-200"
                   id="thumb-2" onclick="selectThumb(2)" onmouseenter="highlightThumb(2)">
                <img id="thumb-img-2" src="" alt="" class="w-full h-full object-cover">
              </div>
            </div>
          </div>

          <!-- Info -->
          <div class="flex flex-col">
            <p class="font-body text-[11px] tracking-[0.14em] uppercase text-accent mb-2" id="product-category-label">Danh mục</p>
            <h1 class="font-heading font-medium text-brand-dark mb-3" id="product-name" style="font-size:clamp(1.8rem,3vw,2.4rem);">Tên sản phẩm</h1>
            <p class="font-heading text-2xl text-accent mb-5" id="product-price">0 ₫</p>

            <!-- Stars -->
            <div class="flex items-center gap-2 mb-7">
              <div class="flex gap-0.5">
                <svg width="13" height="13" viewBox="0 0 24 24" fill="#9E3D3D"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>
                <svg width="13" height="13" viewBox="0 0 24 24" fill="#9E3D3D"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>
                <svg width="13" height="13" viewBox="0 0 24 24" fill="#9E3D3D"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>
                <svg width="13" height="13" viewBox="0 0 24 24" fill="#9E3D3D"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>
                <svg width="13" height="13" viewBox="0 0 24 24" fill="#E2E2E2"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>
              </div>
              <span class="font-body text-[11px] text-secondary-dark">4.0 (128 đánh giá)</span>
            </div>

            <!-- Size -->
            <div class="mb-6">
              <div class="flex items-center justify-between mb-3">
                <p class="font-body text-[11px] tracking-[0.1em] uppercase text-brand-dark">Chọn size</p>
                <button onclick="navigateTo('size-guide')" class="font-body text-[11px] tracking-[0.06em] text-accent underline hover:no-underline transition-all duration-200">Hướng dẫn size</button>
              </div>
              <div class="flex gap-2">
                <button class="size-btn" onclick="selectSize(this)">XS</button>
                <button class="size-btn" onclick="selectSize(this)">S</button>
                <button class="size-btn selected" onclick="selectSize(this)">M</button>
                <button class="size-btn" onclick="selectSize(this)">L</button>
                <button class="size-btn" onclick="selectSize(this)">XL</button>
              </div>
            </div>

            <!-- Quantity -->
            <div class="mb-8">
              <p class="font-body text-[11px] tracking-[0.1em] uppercase text-brand-dark mb-3">Số lượng</p>
              <div class="flex items-center">
                <button class="qty-btn" onclick="changeQty(-1)">−</button>
                <div class="w-12 h-[38px] border-y border-secondary flex items-center justify-center font-body text-sm" id="qty-display">1</div>
                <button class="qty-btn" onclick="changeQty(1)">+</button>
              </div>
            </div>

            <!-- CTA -->
            <div class="flex gap-3 mb-7">
              <button class="btn-primary flex-1" onclick="addToCart()">Thêm vào giỏ hàng</button>
              <button aria-label="Yêu thích"
                      class="w-12 h-12 flex items-center justify-center border border-secondary hover:border-accent transition-colors duration-200 focus-visible:outline-none active:scale-95"
                      style="transition:border-color 0.2s ease,transform 0.15s ease;">
                <svg width="17" height="17" viewBox="0 0 24 24" fill="none" stroke="#1A1A1A" stroke-width="1.5" stroke-linecap="round"><path d="M20.84 4.61a5.5 5.5 0 00-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 00-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 000-7.78z"/></svg>
              </button>
            </div>

            <!-- Sustainability note -->
            <div class="border border-secondary/60 p-4 mb-7 flex items-start gap-3">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#9E3D3D" stroke-width="1.4" stroke-linecap="round" class="flex-shrink-0 mt-0.5"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
              <div>
                <p class="font-body text-[11px] font-medium tracking-[0.08em] uppercase text-brand-dark mb-1">Sản phẩm bền vững</p>
                <p class="font-body font-light text-[12px] text-brand-dark/55">Vật liệu hữu cơ, sản xuất công bằng và đóng gói tái chế.</p>
              </div>
            </div>

            <!-- Tabs -->
            <div class="border-b border-secondary mb-5">
              <div class="flex">
                <button class="tab-btn active" onclick="switchTab('mo-ta',this)">Mô tả</button>
                <button class="tab-btn" onclick="switchTab('chat-lieu',this)">Chất liệu</button>
                <button class="tab-btn" onclick="switchTab('bao-quan',this)">Bảo quản</button>
              </div>
            </div>
            <div id="mo-ta" class="tab-content active font-body font-light text-[14px] leading-relaxed text-brand-dark/65">
              Thiết kế tối giản, thanh lịch với đường cắt may tinh tế. Phù hợp cho cả trang phục hàng ngày lẫn các dịp đặc biệt. Form dáng rộng thoải mái, dễ phối đồ.
            </div>
            <div id="chat-lieu" class="tab-content font-body font-light text-[14px] leading-relaxed text-brand-dark/65">
              <ul class="space-y-2">
                <li>• 100% cotton hữu cơ chứng nhận GOTS</li>
                <li>• Thuốc nhuộm thiên nhiên, không formaldehyde</li>
                <li>• Xuất xứ: Làng nghề dệt Hà Đông, Hà Nội</li>
              </ul>
            </div>
            <div id="bao-quan" class="tab-content font-body font-light text-[14px] leading-relaxed text-brand-dark/65">
              <ul class="space-y-2">
                <li>• Giặt tay hoặc máy chế độ nhẹ, nước lạnh</li>
                <li>• Không dùng chất tẩy trắng</li>
                <li>• Phơi nơi thoáng mát, tránh ánh nắng trực tiếp</li>
                <li>• Ủi mặt trái ở nhiệt độ thấp</li>
              </ul>
            </div>
          </div>
        </div>

        <!-- Related products -->
        <div class="mt-20 pt-14 border-t border-secondary">
          <h2 class="font-heading font-light text-brand-dark mb-10" style="font-size:clamp(1.8rem,3vw,2.4rem);">Sản phẩm tương tự</h2>
          <div id="related-grid" class="grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-6">
            <div class="product-card cursor-pointer" onclick="showProduct({id:2,name:'Áo blouse lụa',price:'1.290.000',numPrice:1290000,category:'ao',img:'https://images.unsplash.com/photo-1485462537746-965f33f7f6a7?w=400&h=533&fit=crop&q=80'})">
              <div class="card-img-wrap aspect-[3/4] mb-3 bg-cream-dark"><img src="https://images.unsplash.com/photo-1485462537746-965f33f7f6a7?w=400&h=533&fit=crop&q=80" alt="" class="card-img w-full h-full object-cover"></div>
              <p class="font-body text-[12px] tracking-[0.08em] uppercase text-secondary-dark mb-0.5">Áo</p>
              <h3 class="font-heading text-lg font-medium text-brand-dark">Áo blouse lụa</h3>
              <p class="font-body text-sm text-accent">1.290.000 ₫</p>
            </div>
            <div class="product-card cursor-pointer" onclick="showProduct({id:3,name:'Áo sơ mi organic',price:'750.000',numPrice:750000,category:'ao',img:'https://images.unsplash.com/photo-1598033129183-c4f50c736f10?w=400&h=533&fit=crop&q=80',badge:'Bestseller'})">
              <div class="card-img-wrap aspect-[3/4] mb-3 bg-cream-dark"><img src="https://images.unsplash.com/photo-1598033129183-c4f50c736f10?w=400&h=533&fit=crop&q=80" alt="" class="card-img w-full h-full object-cover"></div>
              <p class="font-body text-[12px] tracking-[0.08em] uppercase text-secondary-dark mb-0.5">Áo</p>
              <h3 class="font-heading text-lg font-medium text-brand-dark">Áo sơ mi organic</h3>
              <p class="font-body text-sm text-accent">750.000 ₫</p>
            </div>
            <div class="product-card cursor-pointer" onclick="showProduct({id:4,name:'Áo crop linen',price:'720.000',numPrice:720000,category:'ao',img:'https://images.unsplash.com/photo-1551163943-3f7e43fe1e1e?w=400&h=533&fit=crop&q=80',badge:'Mới'})">
              <div class="card-img-wrap aspect-[3/4] mb-3 bg-cream-dark"><img src="https://images.unsplash.com/photo-1551163943-3f7e43fe1e1e?w=400&h=533&fit=crop&q=80" alt="" class="card-img w-full h-full object-cover"></div>
              <p class="font-body text-[12px] tracking-[0.08em] uppercase text-secondary-dark mb-0.5">Áo</p>
              <h3 class="font-heading text-lg font-medium text-brand-dark">Áo crop linen</h3>
              <p class="font-body text-sm text-accent">720.000 ₫</p>
            </div>
            <div class="product-card cursor-pointer" onclick="showProduct({id:5,name:'Áo oversize cotton',price:'980.000',numPrice:980000,category:'ao',img:'https://images.unsplash.com/photo-1490481651871-ab68de25d43d?w=400&h=533&fit=crop&q=80'})">
              <div class="card-img-wrap aspect-[3/4] mb-3 bg-cream-dark"><img src="https://images.unsplash.com/photo-1490481651871-ab68de25d43d?w=400&h=533&fit=crop&q=80" alt="" class="card-img w-full h-full object-cover"></div>
              <p class="font-body text-[12px] tracking-[0.08em] uppercase text-secondary-dark mb-0.5">Áo</p>
              <h3 class="font-heading text-lg font-medium text-brand-dark">Áo oversize cotton</h3>
              <p class="font-body text-sm text-accent">980.000 ₫</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ============================================================ -->
  <!-- PAGE: ABOUT                                                   -->
  <!-- ============================================================ -->
  <section id="about" class="page-section hidden">
    <!-- About hero -->
    <div class="relative min-h-[62vh] flex items-end overflow-hidden pt-20" style="background:#1A1A1A;">
      <div class="absolute inset-0">
        <img src="https://images.unsplash.com/photo-1558769132-cb1aea458c5e?w=1440&h=620&fit=crop&q=80" alt="" class="w-full h-full object-cover" style="opacity:0.45;">
        <div class="absolute inset-0" style="background:linear-gradient(to top,#1A1A1A 0%,rgba(26,26,26,0.55) 50%,transparent 100%);"></div>
      </div>
      <div class="container mx-auto px-6 md:px-14 pb-20 relative z-10">
        <p class="font-body text-[11px] tracking-[0.22em] uppercase text-accent mb-5 flex items-center gap-3">
          <span class="w-9 h-px bg-accent inline-block"></span>Câu chuyện của chúng tôi
        </p>
        <h1 class="font-heading font-light text-cream leading-tight max-w-2xl" style="font-size:clamp(2.5rem,6vw,4.8rem);">
          Thời trang<br>với lương tâm
        </h1>
      </div>
    </div>

    <!-- Mission -->
    <div class="py-24 px-6 md:px-14">
      <div class="container mx-auto grid md:grid-cols-2 gap-16 items-center">
        <div>
          <p class="font-body text-[11px] tracking-[0.22em] uppercase text-accent mb-4 flex items-center gap-3">
            <span class="deco-line"></span>Sứ mệnh
          </p>
          <h2 class="font-heading font-light text-brand-dark mb-6 leading-tight" style="font-size:clamp(1.8rem,3.5vw,2.8rem);">
            Chúng tôi tin rằng thời trang không nên có giá là trái đất
          </h2>
          <p class="font-body font-light text-[15px] leading-relaxed text-brand-dark/65 mb-4">
            O'mely được thành lập năm 2021 với mục tiêu đơn giản: chứng minh rằng thời trang đẹp và thời trang bền vững không phải là hai khái niệm đối lập.
          </p>
          <p class="font-body font-light text-[15px] leading-relaxed text-brand-dark/65">
            Mỗi thiết kế đều trải qua nghiên cứu kỹ lưỡng về vật liệu, quy trình sản xuất và tác động môi trường. Chúng tôi không chỉ tạo ra quần áo — chúng tôi tạo ra thay đổi.
          </p>
        </div>
        <div class="grid grid-cols-2 gap-4">
          <div class="p-8 text-center" style="background:rgba(158,61,61,0.09);">
            <p class="font-heading font-light text-accent mb-2" style="font-size:3.5rem;">10K+</p>
            <p class="font-body text-[11px] tracking-[0.1em] uppercase text-brand-dark/55">Khách hàng</p>
          </div>
          <div class="p-8 text-center bg-cream-dark mt-8">
            <p class="font-heading font-light text-accent mb-2" style="font-size:3.5rem;">100%</p>
            <p class="font-body text-[11px] tracking-[0.1em] uppercase text-brand-dark/55">Vật liệu hữu cơ</p>
          </div>
          <div class="p-8 text-center bg-cream-dark">
            <p class="font-heading font-light text-accent mb-2" style="font-size:3.5rem;">0</p>
            <p class="font-body text-[11px] tracking-[0.1em] uppercase text-brand-dark/55">Bao bì nhựa</p>
          </div>
          <div class="p-8 text-center -mt-8" style="background:rgba(158,61,61,0.09);">
            <p class="font-heading font-light text-accent mb-2" style="font-size:3.5rem;">3+</p>
            <p class="font-body text-[11px] tracking-[0.1em] uppercase text-brand-dark/55">Năm hoạt động</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Timeline -->
    <div class="py-24 px-6 md:px-14 bg-cream-dark">
      <div class="container mx-auto max-w-2xl">
        <p class="font-body text-[11px] tracking-[0.22em] uppercase text-accent mb-4 flex items-center gap-3">
          <span class="deco-line"></span>Hành trình
        </p>
        <h2 class="font-heading font-light text-brand-dark mb-14" style="font-size:clamp(2rem,4vw,2.8rem);">Từng bước của O'mely</h2>
        <div class="border-l border-secondary ml-4 space-y-10 pl-10">
          <div class="relative timeline-dot timeline-dot-dark">
            <p class="font-body text-[11px] tracking-[0.12em] uppercase text-accent mb-2">2021</p>
            <h3 class="font-heading text-xl font-medium text-brand-dark mb-2">Ra đời từ gara nhỏ</h3>
            <p class="font-body font-light text-[14px] text-brand-dark/60 leading-relaxed">Nhà sáng lập Nguyễn Ly bắt đầu O'mely tại Hà Nội với 5 nhân viên và bộ sưu tập 12 mẫu đầu tiên.</p>
          </div>
          <div class="relative timeline-dot timeline-dot-dark">
            <p class="font-body text-[11px] tracking-[0.12em] uppercase text-accent mb-2">2022</p>
            <h3 class="font-heading text-xl font-medium text-brand-dark mb-2">Chứng nhận GOTS</h3>
            <p class="font-body font-light text-[14px] text-brand-dark/60 leading-relaxed">Toàn bộ dây chuyền sản xuất đạt chứng nhận Global Organic Textile Standard. Mở rộng lên 30 nhân viên.</p>
          </div>
          <div class="relative timeline-dot timeline-dot-dark">
            <p class="font-body text-[11px] tracking-[0.12em] uppercase text-accent mb-2">2023</p>
            <h3 class="font-heading text-xl font-medium text-brand-dark mb-2">10.000 khách hàng</h3>
            <p class="font-body font-light text-[14px] text-brand-dark/60 leading-relaxed">Cột mốc 10.000 khách hàng. Ra mắt chương trình Take-Back — thu hồi và tái chế trang phục cũ.</p>
          </div>
          <div class="relative timeline-dot timeline-dot-dark">
            <p class="font-body text-[11px] tracking-[0.12em] uppercase text-accent mb-2">2024</p>
            <h3 class="font-heading text-xl font-medium text-brand-dark mb-2">Mở rộng bộ sưu tập</h3>
            <p class="font-body font-light text-[14px] text-brand-dark/60 leading-relaxed">Ra mắt dòng phụ kiện và bộ sưu tập thu đông với len hữu cơ từ Đà Lạt.</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Three pillars -->
    <div class="py-24 px-6 md:px-14">
      <div class="container mx-auto">
        <div class="text-center mb-14">
          <p class="font-body text-[11px] tracking-[0.22em] uppercase text-accent mb-4">Giá trị cốt lõi</p>
          <h2 class="font-heading font-light text-brand-dark" style="font-size:clamp(2rem,4vw,2.8rem);">Ba trụ cột của O'mely</h2>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-3 border border-secondary">
          <div class="p-10 border-b md:border-b-0 md:border-r border-secondary transition-colors duration-300 hover:bg-cream-dark">
            <p class="font-body text-[11px] tracking-[0.2em] uppercase text-accent mb-5">People</p>
            <h3 class="font-heading text-2xl font-medium text-brand-dark mb-4">Con người</h3>
            <p class="font-body font-light text-[14px] leading-relaxed text-brand-dark/60">Người thợ thủ công là trái tim của O'mely. Chúng tôi đảm bảo mức lương công bằng và điều kiện làm việc an toàn cho tất cả đối tác.</p>
          </div>
          <div class="p-10 border-b md:border-b-0 md:border-r border-secondary transition-colors duration-300 hover:bg-cream-dark">
            <p class="font-body text-[11px] tracking-[0.2em] uppercase text-accent mb-5">Planet</p>
            <h3 class="font-heading text-2xl font-medium text-brand-dark mb-4">Hành tinh</h3>
            <p class="font-body font-light text-[14px] leading-relaxed text-brand-dark/60">Từ nguồn vật liệu đến vận chuyển, chúng tôi giảm thiểu tối đa dấu chân carbon trong mỗi quyết định sản xuất.</p>
          </div>
          <div class="p-10 transition-colors duration-300 hover:bg-cream-dark">
            <p class="font-body text-[11px] tracking-[0.2em] uppercase text-accent mb-5">Product</p>
            <h3 class="font-heading text-2xl font-medium text-brand-dark mb-4">Sản phẩm</h3>
            <p class="font-body font-light text-[14px] leading-relaxed text-brand-dark/60">Chúng tôi thiết kế để tồn tại lâu dài — không theo trend ngắn hạn. Mỗi sản phẩm O'mely được làm để đồng hành qua nhiều năm tháng.</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Team -->
    <div class="py-24 px-6 md:px-14 bg-cream-dark">
      <div class="container mx-auto">
        <div class="text-center mb-14">
          <p class="font-body text-[11px] tracking-[0.22em] uppercase text-accent mb-4">Đội ngũ</p>
          <h2 class="font-heading font-light text-brand-dark" style="font-size:clamp(2rem,4vw,2.8rem);">Những con người phía sau O'mely</h2>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-3xl mx-auto">
          <div class="text-center">
            <div class="aspect-square overflow-hidden mb-4 max-w-[200px] mx-auto">
              <img src="https://images.unsplash.com/photo-1573496359142-b8d87734a5a2?w=200&h=200&fit=crop&q=80" alt="Nguyễn Ly" class="w-full h-full object-cover">
            </div>
            <h3 class="font-heading text-xl font-medium text-brand-dark mb-1">Nguyễn Ly</h3>
            <p class="font-body text-[11px] tracking-[0.12em] uppercase text-accent">Nhà sáng lập</p>
          </div>
          <div class="text-center">
            <div class="aspect-square overflow-hidden mb-4 max-w-[200px] mx-auto">
              <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=200&h=200&fit=crop&q=80" alt="Trần Minh" class="w-full h-full object-cover">
            </div>
            <h3 class="font-heading text-xl font-medium text-brand-dark mb-1">Trần Minh</h3>
            <p class="font-body text-[11px] tracking-[0.12em] uppercase text-accent">Giám đốc sáng tạo</p>
          </div>
          <div class="text-center">
            <div class="aspect-square overflow-hidden mb-4 max-w-[200px] mx-auto">
              <img src="https://images.unsplash.com/photo-1580489944761-15a19d654956?w=200&h=200&fit=crop&q=80" alt="Phạm Hương" class="w-full h-full object-cover">
            </div>
            <h3 class="font-heading text-xl font-medium text-brand-dark mb-1">Phạm Hương</h3>
            <p class="font-body text-[11px] tracking-[0.12em] uppercase text-accent">Trưởng phòng bền vững</p>
          </div>
        </div>
      </div>
    </div>

    <!-- CTA -->
    <div class="py-20 px-6 md:px-14 text-center">
      <div class="container mx-auto max-w-xl">
        <h2 class="font-heading font-light text-brand-dark mb-6" style="font-size:clamp(2rem,4vw,2.8rem);">Sẵn sàng mặc có trách nhiệm?</h2>
        <p class="font-body font-light text-[15px] text-brand-dark/60 mb-10">Khám phá bộ sưu tập O'mely và bắt đầu hành trình thời trang bền vững của bạn.</p>
        <button onclick="navigateTo('shop')" class="btn-primary">Mua sắm ngay</button>
      </div>
    </div>

    <!-- Mini footer -->
    <footer style="background:#1A1A1A;" class="pt-10 pb-8 px-6 md:px-14">
      <div class="container mx-auto border-t pt-8 flex flex-col md:flex-row justify-between items-center gap-3" style="border-color:rgba(255,255,255,0.08);">
        <p class="font-heading font-semibold text-xl text-cream">O'mely</p>
        <p class="font-body font-light text-[12px]" style="color:rgba(255,255,255,0.25);">© 2024 O'mely. Mọi quyền được bảo lưu.</p>
        <p class="font-body font-light text-[12px]" style="color:rgba(255,255,255,0.25);">Thời trang bền vững</p>
      </div>
    </footer>
  </section>

  <!-- ===== CART SIDEBAR ===== -->
  <div id="cart-sidebar"
       class="fixed top-0 right-0 bottom-0 w-80 bg-cream z-[70] flex flex-col"
       style="transform:translateX(100%);box-shadow:-8px 0 40px rgba(26,26,26,0.15);">
    <div class="flex items-center justify-between px-6 py-5 border-b border-secondary">
      <h2 class="font-heading text-xl font-medium">Giỏ hàng</h2>
      <button onclick="toggleCart()" aria-label="Đóng giỏ hàng"
              class="hover:opacity-50 transition-opacity duration-200 focus-visible:outline-none">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#1A1A1A" stroke-width="1.5" stroke-linecap="round">
          <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
        </svg>
      </button>
    </div>
    <div id="cart-items" class="flex-1 overflow-y-auto px-6 py-6">
      <p id="cart-empty" class="font-body font-light text-[14px] text-brand-dark/45 text-center py-12">Giỏ hàng của bạn đang trống.</p>
    </div>
    <div class="px-6 py-6 border-t border-secondary">
      <div class="flex justify-between items-center mb-5">
        <span class="font-body text-[11px] tracking-[0.1em] uppercase">Tổng cộng</span>
        <span class="font-heading text-xl text-accent" id="cart-total">0 ₫</span>
      </div>
      <button class="btn-primary w-full" onclick="goCheckout()">Thanh toán</button>
    </div>
  </div>
  <div id="cart-overlay" class="fixed inset-0 hidden z-[65]" style="background:rgba(26,26,26,0.2);" onclick="toggleCart()"></div>

  <!-- ============================================================ -->
  <!-- PAGE: 404 NOT FOUND                                          -->
  <!-- ============================================================ -->
  <section id="not-found" class="page-section hidden min-h-screen flex flex-col items-center justify-center bg-cream px-6 text-center">
    <p class="font-heading font-bold text-brand-dark mb-2" style="font-size:clamp(6rem,18vw,12rem);line-height:1;opacity:0.07;">404</p>
    <p class="font-heading font-normal text-brand-dark mb-3" style="font-size:clamp(1.6rem,3vw,2.4rem);margin-top:-2rem;">Trang không tìm thấy</p>
    <p class="font-body font-light text-[14px] text-brand-dark/55 max-w-sm mb-8">Trang bạn đang tìm có thể đã bị xóa hoặc địa chỉ không chính xác.</p>
    <button class="btn-primary" onclick="navigateTo('home')">Về trang chủ</button>
  </section>

  <!-- ============================================================ -->
  <!-- PAGE: AUTH (Login / Register / Forgot)                       -->
  <!-- ============================================================ -->
  <section id="auth" class="page-section hidden min-h-screen bg-cream flex items-center justify-center px-4 pt-20 pb-16">
    <div class="w-full max-w-md">
      <!-- Login -->
      <div id="auth-login" class="auth-view active">
        <p class="font-body text-[12px] tracking-[0.28em] uppercase text-accent mb-3 flex items-center gap-3"><span class="deco-line"></span>O'mely</p>
        <h2 class="font-heading text-[2rem] font-normal text-brand-dark mb-1">Đăng nhập</h2>
        <p class="font-body text-[13px] text-brand-dark/50 mb-8">Chào mừng trở lại.</p>
        <form onsubmit="doLogin(event)" class="space-y-5">
          <div>
            <label class="form-label">Email</label>
            <input id="login-email" type="email" class="form-input" placeholder="email@example.com" required>
          </div>
          <div>
            <label class="form-label">Mật khẩu</label>
            <input id="login-pass" type="password" class="form-input" placeholder="••••••••" required>
          </div>
          <div class="flex items-center justify-between">
            <label class="flex items-center gap-2 cursor-pointer">
              <input type="checkbox" style="accent-color:#9E3D3D;">
              <span class="font-body text-[12px] text-brand-dark/60">Nhớ tôi</span>
            </label>
            <button type="button" onclick="showAuthView('forgot')" class="font-body text-[12px] text-accent hover:underline transition-all">Quên mật khẩu?</button>
          </div>
          <button type="submit" class="btn-primary w-full mt-2">Đăng nhập</button>
        </form>
        <p class="font-body text-[13px] text-brand-dark/55 text-center mt-6">Chưa có tài khoản? <button onclick="showAuthView('register')" class="text-accent hover:underline">Đăng ký ngay</button></p>
      </div>

      <!-- Register -->
      <div id="auth-register" class="auth-view">
        <p class="font-body text-[12px] tracking-[0.28em] uppercase text-accent mb-3 flex items-center gap-3"><span class="deco-line"></span>O'mely</p>
        <h2 class="font-heading text-[2rem] font-normal text-brand-dark mb-1">Tạo tài khoản</h2>
        <p class="font-body text-[13px] text-brand-dark/50 mb-8">Tham gia cộng đồng thời trang bền vững.</p>
        <form onsubmit="doRegister(event)" class="space-y-5">
          <div>
            <label class="form-label">Họ và tên</label>
            <input id="reg-name" type="text" class="form-input" placeholder="Nguyễn Văn A" required>
          </div>
          <div>
            <label class="form-label">Email</label>
            <input id="reg-email" type="email" class="form-input" placeholder="email@example.com" required>
          </div>
          <div>
            <label class="form-label">Số điện thoại</label>
            <input id="reg-phone" type="tel" class="form-input" placeholder="0901 234 567">
          </div>
          <div>
            <label class="form-label">Mật khẩu</label>
            <input id="reg-pass" type="password" class="form-input" placeholder="Tối thiểu 6 ký tự" required minlength="6">
          </div>
          <button type="submit" class="btn-primary w-full mt-2">Tạo tài khoản</button>
        </form>
        <p class="font-body text-[13px] text-brand-dark/55 text-center mt-6">Đã có tài khoản? <button onclick="showAuthView('login')" class="text-accent hover:underline">Đăng nhập</button></p>
      </div>

      <!-- Forgot -->
      <div id="auth-forgot" class="auth-view">
        <p class="font-body text-[12px] tracking-[0.28em] uppercase text-accent mb-3 flex items-center gap-3"><span class="deco-line"></span>O'mely</p>
        <h2 class="font-heading text-[2rem] font-normal text-brand-dark mb-1">Quên mật khẩu</h2>
        <p class="font-body text-[13px] text-brand-dark/50 mb-8">Nhập email để nhận hướng dẫn đặt lại mật khẩu.</p>
        <form onsubmit="doForgot(event)" class="space-y-5">
          <div>
            <label class="form-label">Email</label>
            <input id="forgot-email" type="email" class="form-input" placeholder="email@example.com" required>
          </div>
          <div id="forgot-success" class="hidden py-3 px-4 border-l-2 border-accent">
            <p class="font-body text-[13px] text-brand-dark/70">Nếu email tồn tại, chúng tôi đã gửi hướng dẫn đặt lại mật khẩu.</p>
          </div>
          <button type="submit" class="btn-primary w-full">Gửi yêu cầu</button>
        </form>
        <p class="font-body text-[13px] text-brand-dark/55 text-center mt-6"><button onclick="showAuthView('login')" class="text-accent hover:underline">← Quay lại đăng nhập</button></p>
      </div>
    </div>
  </section>

  <!-- ============================================================ -->
  <!-- PAGE: CHECKOUT                                                -->
  <!-- ============================================================ -->
  <section id="checkout" class="page-section hidden min-h-screen bg-cream pt-24 pb-20 px-6 md:px-14">
    <!-- Step indicator -->
    <div class="max-w-4xl mx-auto mb-12">
      <div class="flex items-center justify-center gap-0 max-w-xs mx-auto">
        <div id="step-dot-1" class="step-indicator-dot active">1</div>
        <div id="step-line-1" class="step-connector"></div>
        <div id="step-dot-2" class="step-indicator-dot">2</div>
        <div id="step-line-2" class="step-connector"></div>
        <div id="step-dot-3" class="step-indicator-dot">3</div>
      </div>
      <div class="flex justify-between max-w-xs mx-auto mt-2">
        <span class="font-body text-[12px] tracking-[0.1em] uppercase text-brand-dark/50">Địa chỉ</span>
        <span class="font-body text-[12px] tracking-[0.1em] uppercase text-brand-dark/50">Thanh toán</span>
        <span class="font-body text-[12px] tracking-[0.1em] uppercase text-brand-dark/50">Xác nhận</span>
      </div>
    </div>

    <div class="max-w-4xl mx-auto">

      <!-- STEP 1: Address -->
      <div id="checkout-step-1" class="checkout-step active">
        <div class="md:grid md:grid-cols-5 md:gap-12">
          <div class="md:col-span-3">
            <h2 class="font-heading text-[1.8rem] font-normal text-brand-dark mb-8">Địa chỉ giao hàng</h2>
            <form id="form-address" onsubmit="nextCheckoutStep(event)" class="space-y-5">
              <div class="grid grid-cols-2 gap-4">
                <div class="col-span-2">
                  <label class="form-label">Họ và tên *</label>
                  <input id="co-name" type="text" class="form-input" placeholder="Nguyễn Văn A" required>
                </div>
                <div>
                  <label class="form-label">Số điện thoại *</label>
                  <input id="co-phone" type="tel" class="form-input" placeholder="0901 234 567" required>
                </div>
                <div>
                  <label class="form-label">Email</label>
                  <input id="co-email" type="email" class="form-input" placeholder="email@example.com">
                </div>
                <div class="col-span-2">
                  <label class="form-label">Địa chỉ *</label>
                  <input id="co-address" type="text" class="form-input" placeholder="Số nhà, tên đường, phường/xã" required>
                </div>
                <div>
                  <label class="form-label">Tỉnh / Thành phố *</label>
                  <select id="co-city" class="form-input" required style="background:transparent;">
                    <option value="">Chọn tỉnh/TP</option>
                    <option>TP. Hồ Chí Minh</option>
                    <option>Hà Nội</option>
                    <option>Đà Nẵng</option>
                    <option>Hải Phòng</option>
                    <option>Cần Thơ</option>
                    <option>Bình Dương</option>
                    <option>Đồng Nai</option>
                    <option>Tỉnh / TP khác</option>
                  </select>
                </div>
                <div>
                  <label class="form-label">Quận / Huyện</label>
                  <input id="co-district" type="text" class="form-input" placeholder="Quận / Huyện">
                </div>
                <div class="col-span-2">
                  <label class="form-label">Ghi chú</label>
                  <textarea id="co-note" class="form-input" rows="2" placeholder="Ghi chú cho người giao hàng (tùy chọn)" style="resize:none;"></textarea>
                </div>
              </div>
              <div class="flex gap-3 mt-4">
                <button type="button" onclick="navigateTo('shop')" class="btn-outline">← Tiếp tục mua sắm</button>
                <button type="submit" class="btn-primary flex-1">Tiếp theo →</button>
              </div>
            </form>
          </div>
          <div class="md:col-span-2 mt-10 md:mt-0">
            <div class="bg-cream-dark p-5">
              <p class="font-body text-[12px] tracking-[0.18em] uppercase text-accent mb-4">Đơn hàng</p>
              <div id="checkout-summary-1" class="space-y-3 mb-4"></div>
              <div class="border-t border-secondary pt-3 flex justify-between">
                <span class="font-body text-[12px] uppercase tracking-[0.1em] text-brand-dark/60">Tổng cộng</span>
                <span id="checkout-total-1" class="font-heading text-lg text-brand-dark font-semibold"></span>
              </div>
              <p class="font-body text-[11px] text-brand-dark/45 mt-3">Phí vận chuyển sẽ được tính ở bước tiếp theo.</p>
            </div>
          </div>
        </div>
      </div>

      <!-- STEP 2: Payment -->
      <div id="checkout-step-2" class="checkout-step">
        <div class="md:grid md:grid-cols-5 md:gap-12">
          <div class="md:col-span-3">
            <h2 class="font-heading text-[1.8rem] font-normal text-brand-dark mb-8">Phương thức thanh toán</h2>
            <div class="space-y-3 mb-8">
              <div id="pay-cod" class="pay-option selected" onclick="selectPayment('cod')">
                <div class="pay-radio"></div>
                <div>
                  <p class="font-body text-[13px] font-medium text-brand-dark">Thanh toán khi nhận hàng (COD)</p>
                  <p class="font-body text-[11px] text-brand-dark/50 mt-0.5">Thanh toán tiền mặt khi nhận hàng</p>
                </div>
              </div>
              <div id="pay-bank" class="pay-option" onclick="selectPayment('bank')">
                <div class="pay-radio"></div>
                <div>
                  <p class="font-body text-[13px] font-medium text-brand-dark">Chuyển khoản ngân hàng</p>
                  <p class="font-body text-[11px] text-brand-dark/50 mt-0.5">Vietcombank · MB Bank · BIDV</p>
                </div>
              </div>
            </div>
            <div id="bank-info" class="hidden bg-cream-dark p-4 mb-6">
              <p class="font-body text-[11px] tracking-[0.1em] uppercase text-accent mb-3">Thông tin chuyển khoản</p>
              <p class="font-body text-[13px] text-brand-dark">Ngân hàng: <strong>Vietcombank</strong></p>
              <p class="font-body text-[13px] text-brand-dark">STK: <strong>1234 5678 9012</strong></p>
              <p class="font-body text-[13px] text-brand-dark">Chủ TK: <strong>CONG TY O'MELY</strong></p>
              <p class="font-body text-[11px] text-brand-dark/50 mt-2">Nội dung: [Họ tên] + [SĐT]</p>
            </div>
            <div class="flex gap-3">
              <button onclick="prevCheckoutStep()" class="btn-outline">← Quay lại</button>
              <button onclick="placeOrder()" class="btn-primary flex-1">Đặt hàng</button>
            </div>
          </div>
          <div class="md:col-span-2 mt-10 md:mt-0">
            <div class="bg-cream-dark p-5">
              <p class="font-body text-[12px] tracking-[0.18em] uppercase text-accent mb-4">Đơn hàng</p>
              <div id="checkout-summary-2" class="space-y-3 mb-4"></div>
              <div class="border-t border-secondary pt-3 space-y-2">
                <div class="flex justify-between">
                  <span class="font-body text-[12px] text-brand-dark/60">Tạm tính</span>
                  <span id="checkout-subtotal" class="font-body text-[13px] text-brand-dark"></span>
                </div>
                <div class="flex justify-between">
                  <span class="font-body text-[12px] text-brand-dark/60">Vận chuyển</span>
                  <span class="font-body text-[13px] text-accent">Miễn phí</span>
                </div>
                <div class="flex justify-between pt-2 border-t border-secondary">
                  <span class="font-body text-[12px] uppercase tracking-[0.1em] text-brand-dark/60">Tổng cộng</span>
                  <span id="checkout-total-2" class="font-heading text-lg text-brand-dark font-semibold"></span>
                </div>
              </div>
              <div id="checkout-address-review" class="mt-4 pt-4 border-t border-secondary">
                <p class="font-body text-[12px] tracking-[0.14em] uppercase text-accent mb-2">Giao đến</p>
                <p id="checkout-address-text" class="font-body text-[12px] text-brand-dark/70 leading-relaxed"></p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- STEP 3: Confirmation -->
      <div id="checkout-step-3" class="checkout-step">
        <div class="max-w-xl mx-auto text-center py-8">
          <div class="w-16 h-16 rounded-full bg-accent/10 flex items-center justify-center mx-auto mb-6">
            <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="#9E3D3D" stroke-width="1.5" stroke-linecap="round">
              <polyline points="20 6 9 17 4 12"/>
            </svg>
          </div>
          <p class="font-body text-[12px] tracking-[0.28em] uppercase text-accent mb-2">Đặt hàng thành công</p>
          <h2 class="font-heading text-[2rem] font-normal text-brand-dark mb-2">Cảm ơn bạn!</h2>
          <p id="order-number-display" class="font-body text-[13px] text-brand-dark/50 mb-6"></p>
          <div id="order-summary-final" class="text-left bg-cream-dark p-5 mb-6 space-y-3"></div>
          <div id="order-address-final" class="text-left bg-cream-dark p-5 mb-8">
            <p class="font-body text-[12px] tracking-[0.14em] uppercase text-accent mb-2">Giao đến</p>
            <p id="order-address-text" class="font-body text-[13px] text-brand-dark/70 leading-relaxed"></p>
          </div>
          <button class="btn-primary" onclick="navigateTo('shop')">Tiếp tục mua sắm</button>
        </div>
      </div>
    </div>
  </section>

  <!-- ============================================================ -->
  <!-- PAGE: SIZE GUIDE                                              -->
  <!-- ============================================================ -->
  <section id="size-guide" class="page-section hidden bg-cream pt-28 pb-20 px-6 md:px-14">
    <div class="max-w-3xl mx-auto">
      <p class="font-body text-[12px] tracking-[0.28em] uppercase text-accent mb-3 flex items-center gap-3"><span class="deco-line"></span>Hỗ trợ</p>
      <h1 class="font-heading text-[2.2rem] font-normal text-brand-dark mb-3">Hướng dẫn chọn size</h1>
      <p class="font-body text-[14px] text-brand-dark/55 mb-10 max-w-lg">Mỗi sản phẩm O'mely được thiết kế với fit thoải mái. Tham khảo bảng size bên dưới để chọn đúng nhất.</p>

      <!-- Size table -->
      <div class="overflow-x-auto mb-10">
        <table class="w-full border-collapse font-body text-[13px]">
          <thead>
            <tr style="border-bottom:2px solid #E2E2E2;">
              <th class="text-left py-3 pr-6 font-medium tracking-[0.1em] uppercase text-[12px] text-accent">Size</th>
              <th class="text-center py-3 px-4 font-medium tracking-[0.1em] uppercase text-[12px] text-accent">Ngực (cm)</th>
              <th class="text-center py-3 px-4 font-medium tracking-[0.1em] uppercase text-[12px] text-accent">Eo (cm)</th>
              <th class="text-center py-3 px-4 font-medium tracking-[0.1em] uppercase text-[12px] text-accent">Hông (cm)</th>
              <th class="text-center py-3 px-4 font-medium tracking-[0.1em] uppercase text-[12px] text-accent">Chiều cao (cm)</th>
            </tr>
          </thead>
          <tbody>
            <tr style="border-bottom:1px solid #F2F2F2;" class="hover:bg-cream-dark transition-colors duration-150">
              <td class="py-3 pr-6 font-medium text-brand-dark">XS</td>
              <td class="text-center py-3 px-4 text-brand-dark/70">78 – 82</td>
              <td class="text-center py-3 px-4 text-brand-dark/70">60 – 64</td>
              <td class="text-center py-3 px-4 text-brand-dark/70">84 – 88</td>
              <td class="text-center py-3 px-4 text-brand-dark/70">155 – 160</td>
            </tr>
            <tr style="border-bottom:1px solid #F2F2F2;" class="hover:bg-cream-dark transition-colors duration-150">
              <td class="py-3 pr-6 font-medium text-brand-dark">S</td>
              <td class="text-center py-3 px-4 text-brand-dark/70">82 – 86</td>
              <td class="text-center py-3 px-4 text-brand-dark/70">64 – 68</td>
              <td class="text-center py-3 px-4 text-brand-dark/70">88 – 92</td>
              <td class="text-center py-3 px-4 text-brand-dark/70">158 – 163</td>
            </tr>
            <tr style="border-bottom:1px solid #F2F2F2;" class="hover:bg-cream-dark transition-colors duration-150">
              <td class="py-3 pr-6 font-medium text-brand-dark">M</td>
              <td class="text-center py-3 px-4 text-brand-dark/70">86 – 90</td>
              <td class="text-center py-3 px-4 text-brand-dark/70">68 – 72</td>
              <td class="text-center py-3 px-4 text-brand-dark/70">92 – 96</td>
              <td class="text-center py-3 px-4 text-brand-dark/70">160 – 165</td>
            </tr>
            <tr style="border-bottom:1px solid #F2F2F2;" class="hover:bg-cream-dark transition-colors duration-150">
              <td class="py-3 pr-6 font-medium text-brand-dark">L</td>
              <td class="text-center py-3 px-4 text-brand-dark/70">90 – 94</td>
              <td class="text-center py-3 px-4 text-brand-dark/70">72 – 76</td>
              <td class="text-center py-3 px-4 text-brand-dark/70">96 – 100</td>
              <td class="text-center py-3 px-4 text-brand-dark/70">163 – 168</td>
            </tr>
            <tr class="hover:bg-cream-dark transition-colors duration-150">
              <td class="py-3 pr-6 font-medium text-brand-dark">XL</td>
              <td class="text-center py-3 px-4 text-brand-dark/70">94 – 100</td>
              <td class="text-center py-3 px-4 text-brand-dark/70">76 – 82</td>
              <td class="text-center py-3 px-4 text-brand-dark/70">100 – 106</td>
              <td class="text-center py-3 px-4 text-brand-dark/70">165 – 172</td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- How to measure -->
      <div class="grid md:grid-cols-3 gap-6 mb-10">
        <div class="bg-cream-dark p-5">
          <p class="font-body text-[12px] tracking-[0.18em] uppercase text-accent mb-2">Đo vòng ngực</p>
          <p class="font-body text-[13px] text-brand-dark/65 leading-relaxed">Đo quanh phần đầy nhất của ngực, song song với mặt đất. Giữ thước dây thoải mái.</p>
        </div>
        <div class="bg-cream-dark p-5">
          <p class="font-body text-[12px] tracking-[0.18em] uppercase text-accent mb-2">Đo vòng eo</p>
          <p class="font-body text-[13px] text-brand-dark/65 leading-relaxed">Đo quanh phần nhỏ nhất của eo, thường ngay trên rốn. Thở ra tự nhiên khi đo.</p>
        </div>
        <div class="bg-cream-dark p-5">
          <p class="font-body text-[12px] tracking-[0.18em] uppercase text-accent mb-2">Đo vòng hông</p>
          <p class="font-body text-[13px] text-brand-dark/65 leading-relaxed">Đo quanh phần đầy nhất của hông và mông, giữ thước song song với mặt đất.</p>
        </div>
      </div>

      <div class="border-l-2 border-accent pl-5 mb-10">
        <p class="font-body text-[12px] text-brand-dark/60 leading-relaxed"><strong class="text-brand-dark/80">Lưu ý:</strong> Vải linen và lụa tự nhiên có thể co nhẹ sau lần giặt đầu tiên (1–2%). O'mely đã tính đến độ co này trong thiết kế. Nếu số đo nằm giữa hai size, chúng tôi khuyên nên chọn size lớn hơn.</p>
      </div>

      <button class="btn-outline" onclick="navigateTo('shop')">← Quay lại mua sắm</button>
    </div>
    <!-- Mini footer -->
    <div class="mt-16 pt-8 border-t border-secondary text-center">
      <p class="font-body text-[11px] text-brand-dark/35">© 2025 O'mely. Thời trang có trách nhiệm.</p>
    </div>
  </section>

  <!-- ============================================================ -->
  <!-- PAGE: POLICY                                                  -->
  <!-- ============================================================ -->
  <section id="policy" class="page-section hidden bg-cream pt-28 pb-20 px-6 md:px-14">
    <div class="max-w-3xl mx-auto">
      <p class="font-body text-[12px] tracking-[0.28em] uppercase text-accent mb-3 flex items-center gap-3"><span class="deco-line"></span>Hỗ trợ</p>
      <h1 class="font-heading text-[2.2rem] font-normal text-brand-dark mb-10">Chính sách</h1>

      <!-- Policy tabs (scoped) -->
      <div class="flex border-b border-secondary mb-8">
        <button id="ptab-shipping" class="tab-btn active" onclick="openPolicyTab('shipping', this)" style="border-bottom-color:transparent;">Vận chuyển</button>
        <button id="ptab-returns" class="tab-btn" onclick="openPolicyTab('returns', this)" style="border-bottom-color:transparent;">Đổi trả</button>
        <button id="ptab-privacy" class="tab-btn" onclick="openPolicyTab('privacy', this)" style="border-bottom-color:transparent;">Bảo mật</button>
      </div>

      <div id="pcontent-shipping" class="policy-tab-content active space-y-5">
        <h3 class="font-heading text-[1.3rem] font-normal text-brand-dark">Chính sách vận chuyển</h3>
        <p class="font-body text-[14px] text-brand-dark/65 leading-relaxed">O'mely giao hàng toàn quốc qua đơn vị vận chuyển uy tín. Thời gian giao hàng từ <strong class="text-brand-dark/80">2–5 ngày làm việc</strong> tùy khu vực.</p>
        <div class="space-y-3">
          <div class="flex justify-between py-3 border-b border-secondary">
            <span class="font-body text-[13px] text-brand-dark/70">TP. Hồ Chí Minh & Hà Nội</span>
            <span class="font-body text-[13px] font-medium text-brand-dark">2–3 ngày</span>
          </div>
          <div class="flex justify-between py-3 border-b border-secondary">
            <span class="font-body text-[13px] text-brand-dark/70">Các tỉnh thành khác</span>
            <span class="font-body text-[13px] font-medium text-brand-dark">3–5 ngày</span>
          </div>
          <div class="flex justify-between py-3 border-b border-secondary">
            <span class="font-body text-[13px] text-brand-dark/70">Phí vận chuyển</span>
            <span class="font-body text-[13px] font-medium text-accent">Miễn phí đơn từ 500.000 ₫</span>
          </div>
          <div class="flex justify-between py-3">
            <span class="font-body text-[13px] text-brand-dark/70">Đơn dưới 500.000 ₫</span>
            <span class="font-body text-[13px] font-medium text-brand-dark">30.000 ₫</span>
          </div>
        </div>
        <p class="font-body text-[13px] text-brand-dark/55 leading-relaxed">Đơn hàng được xử lý trong vòng 1 ngày làm việc sau khi xác nhận. Bạn sẽ nhận email/SMS thông báo khi đơn được giao cho đơn vị vận chuyển.</p>
      </div>

      <div id="pcontent-returns" class="policy-tab-content space-y-5">
        <h3 class="font-heading text-[1.3rem] font-normal text-brand-dark">Chính sách đổi trả</h3>
        <p class="font-body text-[14px] text-brand-dark/65 leading-relaxed">Chúng tôi chấp nhận đổi/trả trong vòng <strong class="text-brand-dark/80">14 ngày</strong> kể từ ngày nhận hàng nếu sản phẩm đáp ứng điều kiện bên dưới.</p>
        <div class="space-y-3">
          <div class="flex items-start gap-3">
            <span class="text-accent mt-0.5">✓</span>
            <p class="font-body text-[13px] text-brand-dark/65">Sản phẩm chưa qua sử dụng, còn nguyên tem nhãn</p>
          </div>
          <div class="flex items-start gap-3">
            <span class="text-accent mt-0.5">✓</span>
            <p class="font-body text-[13px] text-brand-dark/65">Không có dấu hiệu giặt, ngâm, hay hư hỏng do người dùng</p>
          </div>
          <div class="flex items-start gap-3">
            <span class="text-accent mt-0.5">✓</span>
            <p class="font-body text-[13px] text-brand-dark/65">Còn đầy đủ hộp/túi đóng gói ban đầu</p>
          </div>
          <div class="flex items-start gap-3">
            <span style="color:#9A9A9A;" class="mt-0.5">✗</span>
            <p class="font-body text-[13px] text-brand-dark/65">Đồ lót, phụ kiện tóc không được đổi trả vì lý do vệ sinh</p>
          </div>
        </div>
        <p class="font-body text-[13px] text-brand-dark/55 leading-relaxed">Để yêu cầu đổi trả, liên hệ chúng tôi qua email <span class="text-accent">hello@omely.vn</span> kèm ảnh sản phẩm và số đơn hàng. Chúng tôi sẽ phản hồi trong vòng 24 giờ.</p>
      </div>

      <div id="pcontent-privacy" class="policy-tab-content space-y-5">
        <h3 class="font-heading text-[1.3rem] font-normal text-brand-dark">Chính sách bảo mật</h3>
        <p class="font-body text-[14px] text-brand-dark/65 leading-relaxed">O'mely cam kết bảo vệ thông tin cá nhân của bạn. Chúng tôi thu thập và sử dụng dữ liệu một cách minh bạch, có trách nhiệm.</p>
        <div class="space-y-4">
          <div>
            <p class="font-body text-[12px] tracking-[0.12em] uppercase text-brand-dark/70 mb-2">Thông tin chúng tôi thu thập</p>
            <p class="font-body text-[13px] text-brand-dark/60 leading-relaxed">Họ tên, địa chỉ email, số điện thoại, địa chỉ giao hàng khi bạn đặt hàng hoặc tạo tài khoản.</p>
          </div>
          <div>
            <p class="font-body text-[12px] tracking-[0.12em] uppercase text-brand-dark/70 mb-2">Cách chúng tôi sử dụng</p>
            <p class="font-body text-[13px] text-brand-dark/60 leading-relaxed">Xử lý đơn hàng, giao tiếp với khách hàng, cải thiện sản phẩm và dịch vụ. Chúng tôi không bán thông tin của bạn cho bên thứ ba.</p>
          </div>
          <div>
            <p class="font-body text-[12px] tracking-[0.12em] uppercase text-brand-dark/70 mb-2">Quyền của bạn</p>
            <p class="font-body text-[13px] text-brand-dark/60 leading-relaxed">Bạn có thể yêu cầu xem, chỉnh sửa hoặc xóa dữ liệu cá nhân bất kỳ lúc nào bằng cách liên hệ <span class="text-accent">hello@omely.vn</span>.</p>
          </div>
        </div>
      </div>

      <div class="mt-12">
        <button class="btn-outline" onclick="navigateTo('home')">← Về trang chủ</button>
      </div>
    </div>
    <!-- Mini footer -->
    <div class="mt-16 pt-8 border-t border-secondary text-center">
      <p class="font-body text-[11px] text-brand-dark/35">© 2025 O'mely. Thời trang có trách nhiệm.</p>
    </div>
  </section>

  <!-- ============================================================ -->
  <!-- PAGE: ACCOUNT                                                 -->
  <!-- ============================================================ -->
  <section id="account" class="page-section hidden bg-cream pt-28 pb-20 px-6 md:px-14">
    <div class="max-w-3xl mx-auto">
      <div class="flex items-center justify-between mb-10">
        <div>
          <p class="font-body text-[12px] tracking-[0.28em] uppercase text-accent mb-2 flex items-center gap-3"><span class="deco-line"></span>Tài khoản</p>
          <h1 class="font-heading text-[2rem] font-normal text-brand-dark">Xin chào, <span id="account-greeting">bạn</span>!</h1>
        </div>
        <button onclick="doLogout()" class="btn-outline text-xs">Đăng xuất</button>
      </div>

      <!-- Account tabs (scoped) -->
      <div class="flex border-b border-secondary mb-8">
        <button id="atab-info"    class="tab-btn active" onclick="openAccountTab('info', this)">Thông tin</button>
        <button id="atab-orders"  class="tab-btn" onclick="openAccountTab('orders', this)">Đơn hàng</button>
        <button id="atab-address" class="tab-btn" onclick="openAccountTab('address', this)">Địa chỉ</button>
      </div>

      <!-- Info tab -->
      <div id="acontent-info" class="account-tab-content active">
        <form onsubmit="saveAccountInfo(event)" class="space-y-5 max-w-md">
          <div>
            <label class="form-label">Họ và tên</label>
            <input id="acc-name" type="text" class="form-input" required>
          </div>
          <div>
            <label class="form-label">Email</label>
            <input id="acc-email" type="email" class="form-input" required>
          </div>
          <div>
            <label class="form-label">Số điện thoại</label>
            <input id="acc-phone" type="tel" class="form-input">
          </div>
          <button type="submit" class="btn-primary">Lưu thay đổi</button>
        </form>
      </div>

      <!-- Orders tab -->
      <div id="acontent-orders" class="account-tab-content">
        <div id="account-orders-list"></div>
      </div>

      <!-- Address tab -->
      <div id="acontent-address" class="account-tab-content">
        <div id="account-address-content"></div>
      </div>
    </div>
    <!-- Mini footer -->
    <div class="mt-16 pt-8 border-t border-secondary text-center">
      <p class="font-body text-[11px] text-brand-dark/35">© 2025 O'mely. Thời trang có trách nhiệm.</p>
    </div>
  </section>

  <!-- ============================================================ -->
  <!-- PAGE: WISHLIST                                                -->
  <!-- ============================================================ -->
  <section id="wishlist" class="page-section hidden bg-cream pt-28 pb-20 px-6 md:px-14">
    <div class="max-w-5xl mx-auto">
      <p class="font-body text-[12px] tracking-[0.28em] uppercase text-accent mb-3 flex items-center gap-3"><span class="deco-line"></span>Tài khoản</p>
      <h1 class="font-heading text-[2rem] font-normal text-brand-dark mb-10">Yêu thích</h1>
      <div id="wishlist-grid" class="grid grid-cols-2 md:grid-cols-4 gap-6"></div>
    </div>
    <!-- Mini footer -->
    <div class="mt-16 pt-8 border-t border-secondary text-center">
      <p class="font-body text-[11px] text-brand-dark/35">© 2025 O'mely. Thời trang có trách nhiệm.</p>
    </div>
  </section>

  <!-- ============================================================ -->
  <!-- SEARCH OVERLAY                                                -->
  <!-- ============================================================ -->
  <div id="search-overlay">
    <button onclick="toggleSearch()" aria-label="Đóng tìm kiếm"
            class="absolute top-6 right-8 p-2 hover:opacity-50 transition-opacity duration-200">
      <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="#1A1A1A" stroke-width="1.5" stroke-linecap="round">
        <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
      </svg>
    </button>
    <div class="w-full max-w-2xl px-4">
      <div class="relative">
        <svg class="absolute left-4 top-1/2 -translate-y-1/2" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#9A9A9A" stroke-width="1.5" stroke-linecap="round">
          <circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/>
        </svg>
        <input id="search-input" type="text" placeholder="Tìm kiếm sản phẩm..."
               class="w-full pl-12 pr-4 py-4 bg-transparent border-b-2 border-brand-dark font-body text-[18px] text-brand-dark outline-none placeholder-secondary-dark"
               oninput="doSearch(this.value)">
      </div>
      <div id="search-results" class="mt-8 grid grid-cols-2 md:grid-cols-4 gap-4"></div>
      <p id="search-empty" class="hidden font-body text-[14px] text-brand-dark/45 text-center mt-10">Không tìm thấy sản phẩm phù hợp.</p>
    </div>
  </div>

  <!-- ===== JAVASCRIPT ===== -->
  <script>
    // === DATA ===
    const PRODUCTS = [
      {id:1, name:'Áo linen tối giản',   price:'890.000',   numPrice:890000,  category:'ao', img:'https://images.unsplash.com/photo-1434389677669-e08b4cac3105?w=400&h=533&fit=crop&q=80',  badge:'Mới'},
      {id:2, name:'Áo blouse lụa',       price:'1.290.000', numPrice:1290000, category:'ao', img:'https://images.unsplash.com/photo-1485462537746-965f33f7f6a7?w=400&h=533&fit=crop&q=80'},
      {id:3, name:'Áo sơ mi organic',    price:'750.000',   numPrice:750000,  category:'ao', img:'https://images.unsplash.com/photo-1598033129183-c4f50c736f10?w=400&h=533&fit=crop&q=80',  badge:'Bestseller'},
      {id:4, name:'Áo crop linen',       price:'720.000',   numPrice:720000,  category:'ao', img:'https://images.unsplash.com/photo-1551163943-3f7e43fe1e1e?w=400&h=533&fit=crop&q=80',  badge:'Mới'},
      {id:5, name:'Áo oversize cotton',  price:'980.000',   numPrice:980000,  category:'ao', img:'https://images.unsplash.com/photo-1490481651871-ab68de25d43d?w=400&h=533&fit=crop&q=80'},
    ];

    const CAT_LABEL = {ao:'Áo'};

    // === STATE ===
    let _user = null;         // null = chưa login | {name,email,phone}
    let _authRedirect = null; // page to redirect after login
    let _checkoutStep = 1;
    let _checkoutData = {};
    let _orders = [];
    let _wishlist = [];       // array of product ids
    let _searchOpen = false;
    let _selectedPayment = 'cod';

    // === NAVIGATION ===
    function navigateTo(page) {
      if ((page === 'account' || page === 'wishlist') && !_user) {
        _authRedirect = page;
        page = 'auth';
      }
      document.querySelectorAll('.page-section').forEach(s => s.classList.add('hidden'));
      const el = document.getElementById(page);
      if (!el) { navigateTo('not-found'); return; }
      el.classList.remove('hidden');
      window.scrollTo({top:0,behavior:'instant'});
      updateNavLinks(page);
      if (page === 'shop') renderProducts('all');
      if (page === 'wishlist') renderWishlist();
      if (page === 'account') renderAccount();
      if (page === 'checkout') initCheckout();
    }

    function updateNavLinks(page) {
      document.querySelectorAll('.nav-link[data-page]').forEach(l => {
        l.classList.toggle('active', l.dataset.page === page);
      });
    }

    window.addEventListener('hashchange', () => {
      const p = location.hash.slice(1);
      navigateTo(p || 'home');
    });

    // === MOBILE MENU ===
    let _mobileOpen = false;
    function toggleMobileMenu() {
      _mobileOpen = !_mobileOpen;
      document.getElementById('mobile-menu').classList.toggle('open', _mobileOpen);
      document.getElementById('mobile-overlay').classList.toggle('hidden', !_mobileOpen);
    }

    // === NAVBAR SCROLL ===
    window.addEventListener('scroll', () => {
      document.getElementById('navbar').classList.toggle('scrolled', window.scrollY > 20);
    }, {passive:true});

    // === TOAST ===
    function showToast(msg, icon) {
      const t = document.createElement('div');
      t.className = 'toast';
      t.innerHTML = `${icon||'<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#9E3D3D" stroke-width="2" stroke-linecap="round"><polyline points="20 6 9 17 4 12"/></svg>'}<span>${msg}</span>`;
      document.body.appendChild(t);
      setTimeout(() => {
        t.style.opacity = '0'; t.style.transform = 'translateY(12px)';
        t.style.transition = 'opacity 0.3s ease, transform 0.3s ease';
        setTimeout(() => t.remove(), 300);
      }, 2500);
    }

    // === AUTH ===
    function showAuthView(view) {
      document.querySelectorAll('.auth-view').forEach(v => v.classList.remove('active'));
      const el = document.getElementById('auth-' + view);
      if (el) el.classList.add('active');
      if (view === 'forgot') document.getElementById('forgot-success').classList.add('hidden');
    }

    function doLogin(e) {
      e.preventDefault();
      const email = document.getElementById('login-email').value.trim();
      const name = email.split('@')[0].replace(/[._]/g,' ').replace(/\b\w/g, c => c.toUpperCase());
      _user = { name, email, phone: '' };
      updateAuthUI();
      showToast('Đăng nhập thành công!');
      navigateTo(_authRedirect || 'home');
      _authRedirect = null;
    }

    function doRegister(e) {
      e.preventDefault();
      _user = {
        name:  document.getElementById('reg-name').value.trim(),
        email: document.getElementById('reg-email').value.trim(),
        phone: document.getElementById('reg-phone').value.trim(),
      };
      updateAuthUI();
      showToast('Tạo tài khoản thành công!');
      navigateTo(_authRedirect || 'home');
      _authRedirect = null;
    }

    function doForgot(e) {
      e.preventDefault();
      document.getElementById('forgot-success').classList.remove('hidden');
    }

    function doLogout() {
      _user = null;
      updateAuthUI();
      closeUserDropdown();
      showToast('Đã đăng xuất.');
      navigateTo('home');
    }

    function updateAuthUI() {
      const btnLogin = document.getElementById('btn-login');
      const btnUser  = document.getElementById('btn-user');
      const avatar   = document.getElementById('user-avatar');
      const nameNav  = document.getElementById('user-name-nav');
      if (_user) {
        btnLogin.classList.add('hidden');
        btnUser.classList.remove('hidden');
        btnUser.style.display = 'flex';
        avatar.textContent = _user.name.charAt(0).toUpperCase();
        nameNav.textContent = _user.name.split(' ')[0];
      } else {
        btnLogin.classList.remove('hidden');
        btnUser.classList.add('hidden');
        btnUser.style.display = 'none';
      }
    }

    function toggleUserDropdown() {
      document.getElementById('user-dropdown').classList.toggle('open');
    }
    function closeUserDropdown() {
      document.getElementById('user-dropdown').classList.remove('open');
    }
    document.addEventListener('click', e => {
      const btn = document.getElementById('btn-user');
      const dd  = document.getElementById('user-dropdown');
      if (btn && dd && !btn.contains(e.target) && !dd.contains(e.target)) {
        dd.classList.remove('open');
      }
    });

    // === SEARCH ===
    function toggleSearch() {
      _searchOpen = !_searchOpen;
      document.getElementById('search-overlay').classList.toggle('open', _searchOpen);
      if (_searchOpen) {
        const inp = document.getElementById('search-input');
        inp.value = '';
        document.getElementById('search-results').innerHTML = '';
        document.getElementById('search-empty').classList.add('hidden');
        setTimeout(() => inp.focus(), 100);
      }
    }

    function doSearch(query) {
      const q = query.trim().toLowerCase();
      const res  = document.getElementById('search-results');
      const empty = document.getElementById('search-empty');
      if (!q) { res.innerHTML = ''; empty.classList.add('hidden'); return; }
      const matches = PRODUCTS.filter(p =>
        p.name.toLowerCase().includes(q) ||
        (CAT_LABEL[p.category]||'').toLowerCase().includes(q)
      );
      empty.classList.toggle('hidden', matches.length > 0);
      res.innerHTML = matches.map(p => `
        <div class="cursor-pointer group" onclick="toggleSearch();showProduct(${JSON.stringify(p)})">
          <div class="aspect-[3/4] overflow-hidden mb-2" style="background:#F2F2F2;">
            <img src="${p.img}" alt="${p.name}" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500">
          </div>
          <p class="font-heading text-[0.9rem] font-medium text-brand-dark leading-snug">${p.name}</p>
          <p class="font-body text-[12px] text-accent">${p.price} ₫</p>
        </div>
      `).join('');
    }

    document.addEventListener('keydown', e => {
      if (e.key === 'Escape' && _searchOpen) toggleSearch();
    });

    // === PRODUCT GRID ===
    function productCardHTML(p) {
      const wishlisted = isWishlisted(p.id);
      return `
        <div class="product-card cursor-pointer" onclick='showProduct(${JSON.stringify(p)})'>
          <div class="card-img-wrap aspect-[3/4] mb-3 relative" style="background:#F2F2F2;overflow:hidden;">
            <img src="${p.img}" alt="${p.name}" class="card-img w-full h-full object-cover">
            <div class="card-overlay absolute inset-0 flex items-end p-3" style="background:rgba(26,26,26,0.04);">
              <span style="background:#1A1A1A;color:#FFFFFF;font-family:'Jost',sans-serif;font-size:10px;letter-spacing:0.1em;text-transform:uppercase;padding:8px 16px;">Xem chi tiết</span>
            </div>
            ${p.badge ? `<span style="position:absolute;top:8px;left:8px;background:${p.badge==='Mới'?'#9E3D3D':'#1A1A1A'};color:#FFFFFF;font-family:'Jost',sans-serif;font-size:9px;letter-spacing:0.1em;text-transform:uppercase;padding:3px 8px;">${p.badge}</span>` : ''}
            <button class="wish-btn${wishlisted?' active':''}" style="position:absolute;top:6px;right:6px;"
                    onclick="event.stopPropagation();toggleWishlist(${p.id})" aria-label="Yêu thích">
              <svg width="17" height="17" viewBox="0 0 24 24" fill="${wishlisted?'#9E3D3D':'none'}" stroke="${wishlisted?'#9E3D3D':'rgba(26,26,26,0.5)'}" stroke-width="1.5" stroke-linecap="round">
                <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
              </svg>
            </button>
          </div>
          <p style="font-family:'Jost',sans-serif;font-size:10px;letter-spacing:0.1em;text-transform:uppercase;color:#9A9A9A;margin-bottom:2px;">${CAT_LABEL[p.category]||p.category}</p>
          <h3 style="font-family:'Playfair Display',serif;font-size:1.05rem;font-weight:500;color:#1A1A1A;margin-bottom:3px;">${p.name}</h3>
          <p style="font-family:'Jost',sans-serif;font-size:13px;color:#9E3D3D;">${p.price} ₫</p>
        </div>
      `;
    }

    function renderProducts(filter) {
      const filtered = filter === 'all' ? PRODUCTS : PRODUCTS.filter(p => p.category === filter);
      document.getElementById('products-grid').innerHTML = filtered.map(productCardHTML).join('');
    }

    function filterProducts(filter, btn) {
      document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      renderProducts(filter);
    }

    // === WISHLIST ===
    function isWishlisted(id) { return _wishlist.includes(id); }

    function toggleWishlist(id) {
      if (!_user) { _authRedirect = 'wishlist'; navigateTo('auth'); return; }
      const idx = _wishlist.indexOf(id);
      if (idx === -1) {
        _wishlist.push(id);
        showToast('Đã thêm vào yêu thích', '<svg width="14" height="14" viewBox="0 0 24 24" fill="#9E3D3D" stroke="#9E3D3D" stroke-width="1.5" stroke-linecap="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></svg>');
      } else {
        _wishlist.splice(idx, 1);
        showToast('Đã bỏ khỏi yêu thích');
      }
      // Re-render grids if visible
      const shop = document.getElementById('shop');
      if (shop && !shop.classList.contains('hidden')) renderProducts(document.querySelector('.filter-btn.active')?.dataset?.filter || 'all');
      const wl = document.getElementById('wishlist');
      if (wl && !wl.classList.contains('hidden')) renderWishlist();
    }

    function renderWishlist() {
      const grid = document.getElementById('wishlist-grid');
      const items = PRODUCTS.filter(p => _wishlist.includes(p.id));
      if (items.length === 0) {
        grid.innerHTML = `<div class="col-span-full text-center py-16">
          <p class="font-heading text-[1.5rem] font-normal text-brand-dark/30 mb-3">Chưa có sản phẩm yêu thích</p>
          <button class="btn-primary" onclick="navigateTo('shop')">Khám phá cửa hàng</button>
        </div>`;
      } else {
        grid.innerHTML = items.map(productCardHTML).join('');
      }
    }

    // === PRODUCT DETAIL ===
    let _currentProduct = null;
    let _currentQty = 1;

    function showProduct(p) {
      _currentProduct = p;
      _currentQty = 1;

      document.getElementById('product-name').textContent = p.name;
      document.getElementById('product-price').textContent = p.price + ' ₫';
      document.getElementById('product-category-label').textContent = CAT_LABEL[p.category] || p.category;
      document.getElementById('product-breadcrumb').textContent = p.name;
      document.getElementById('qty-display').textContent = '1';

      const baseUrl = p.img;
      document.getElementById('product-main-img').src = baseUrl;
      document.getElementById('thumb-img-0').src = baseUrl;
      document.getElementById('thumb-img-1').src = baseUrl;
      document.getElementById('thumb-img-2').src = baseUrl;

      ['thumb-0','thumb-1','thumb-2'].forEach((id,i) => {
        document.getElementById(id).style.borderColor = i===0 ? '#9E3D3D' : 'transparent';
      });
      document.querySelectorAll('.size-btn').forEach((b,i) => b.classList.toggle('selected', i===2));

      // Scoped tab reset for product page
      const prodSection = document.getElementById('product');
      prodSection.querySelectorAll('.tab-btn').forEach((b,i) => b.classList.toggle('active', i===0));
      prodSection.querySelectorAll('.tab-content').forEach((t,i) => t.classList.toggle('active', i===0));

      navigateTo('product');
    }

    function selectThumb(idx) {
      ['thumb-0','thumb-1','thumb-2'].forEach((id,i) => {
        document.getElementById(id).style.borderColor = i===idx ? '#9E3D3D' : 'transparent';
      });
    }
    function highlightThumb(idx) { }

    // === TABS (scoped to product page) ===
    function switchTab(tabId, btn) {
      const productEl = document.getElementById('product');
      productEl.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
      productEl.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
      const t = document.getElementById(tabId);
      if (t) t.classList.add('active');
      if (btn) btn.classList.add('active');
    }

    // === POLICY TABS (scoped) ===
    function openPolicyTab(tabId, btn) {
      document.querySelectorAll('.policy-tab-content').forEach(t => t.classList.remove('active'));
      document.querySelectorAll('#policy .tab-btn').forEach(b => {
        b.classList.remove('active'); b.style.borderBottomColor = 'transparent';
      });
      const t = document.getElementById('pcontent-' + tabId);
      if (t) t.classList.add('active');
      if (btn) { btn.classList.add('active'); btn.style.borderBottomColor = '#9E3D3D'; }
    }
    // Init policy tab active state
    document.addEventListener('DOMContentLoaded', () => {
      const ptab = document.getElementById('ptab-shipping');
      if (ptab) ptab.style.borderBottomColor = '#9E3D3D';
    });

    // === ACCOUNT TABS (scoped) ===
    function openAccountTab(tabId, btn) {
      document.querySelectorAll('.account-tab-content').forEach(t => t.classList.remove('active'));
      document.querySelectorAll('#account .tab-btn').forEach(b => b.classList.remove('active'));
      const t = document.getElementById('acontent-' + tabId);
      if (t) t.classList.add('active');
      if (btn) btn.classList.add('active');
      if (tabId === 'orders') renderAccountOrders();
      if (tabId === 'address') renderAccountAddress();
    }

    function renderAccount() {
      if (!_user) return;
      document.getElementById('account-greeting').textContent = _user.name.split(' ').pop();
      document.getElementById('acc-name').value  = _user.name  || '';
      document.getElementById('acc-email').value = _user.email || '';
      document.getElementById('acc-phone').value = _user.phone || '';
      // Reset to info tab
      openAccountTab('info', document.getElementById('atab-info'));
    }

    function saveAccountInfo(e) {
      e.preventDefault();
      _user.name  = document.getElementById('acc-name').value.trim();
      _user.email = document.getElementById('acc-email').value.trim();
      _user.phone = document.getElementById('acc-phone').value.trim();
      updateAuthUI();
      document.getElementById('account-greeting').textContent = _user.name.split(' ').pop();
      showToast('Đã lưu thông tin!');
    }

    function renderAccountOrders() {
      const container = document.getElementById('account-orders-list');
      if (_orders.length === 0) {
        container.innerHTML = `<div class="text-center py-12">
          <p class="font-heading text-[1.4rem] font-normal text-brand-dark/30 mb-3">Chưa có đơn hàng</p>
          <button class="btn-primary" onclick="navigateTo('shop')">Mua sắm ngay</button>
        </div>`;
        return;
      }
      container.innerHTML = _orders.map(o => `
        <div class="border border-secondary p-5 mb-4">
          <div class="flex items-start justify-between mb-3">
            <div>
              <p class="font-body text-[11px] tracking-[0.12em] uppercase text-accent mb-1">${o.number}</p>
              <p class="font-body text-[12px] text-brand-dark/50">${o.date}</p>
            </div>
            <span class="font-body text-[12px] tracking-[0.1em] uppercase text-accent border border-accent px-3 py-1">Đang xử lý</span>
          </div>
          <div class="space-y-2 mb-3">
            ${o.items.map(i => `
              <div class="flex justify-between font-body text-[13px]">
                <span class="text-brand-dark/70">${i.name} × ${i.qty} (${i.size})</span>
                <span class="text-brand-dark">${(i.numPrice*i.qty).toLocaleString('vi-VN')} ₫</span>
              </div>
            `).join('')}
          </div>
          <div class="border-t border-secondary pt-3 flex justify-between">
            <span class="font-body text-[11px] uppercase tracking-[0.1em] text-brand-dark/50">Tổng</span>
            <span class="font-heading font-semibold text-brand-dark">${o.total.toLocaleString('vi-VN')} ₫</span>
          </div>
        </div>
      `).join('');
    }

    function renderAccountAddress() {
      const container = document.getElementById('account-address-content');
      if (!_checkoutData.name) {
        container.innerHTML = `<div class="text-center py-12">
          <p class="font-heading text-[1.4rem] font-normal text-brand-dark/30 mb-3">Chưa có địa chỉ lưu</p>
          <p class="font-body text-[13px] text-brand-dark/45 mb-6">Địa chỉ sẽ được lưu sau khi bạn đặt hàng.</p>
          <button class="btn-outline" onclick="navigateTo('shop')">Đến cửa hàng</button>
        </div>`;
        return;
      }
      container.innerHTML = `
        <div class="border border-secondary p-5 max-w-sm">
          <p class="font-body text-[12px] tracking-[0.14em] uppercase text-accent mb-3">Địa chỉ mặc định</p>
          <p class="font-body text-[14px] font-medium text-brand-dark mb-1">${_checkoutData.name}</p>
          <p class="font-body text-[13px] text-brand-dark/65">${_checkoutData.phone}</p>
          <p class="font-body text-[13px] text-brand-dark/65">${_checkoutData.address}</p>
          <p class="font-body text-[13px] text-brand-dark/65">${_checkoutData.district ? _checkoutData.district + ', ' : ''}${_checkoutData.city}</p>
        </div>
      `;
    }

    // === SIZE ===
    function selectSize(btn) {
      document.querySelectorAll('.size-btn').forEach(b => b.classList.remove('selected'));
      btn.classList.add('selected');
    }

    // === QUANTITY ===
    function changeQty(delta) {
      _currentQty = Math.max(1, _currentQty + delta);
      document.getElementById('qty-display').textContent = _currentQty;
    }

    // === CART ===
    let _cart = [];
    let _cartOpen = false;

    function toggleCart() {
      _cartOpen = !_cartOpen;
      document.getElementById('cart-sidebar').style.transform = _cartOpen ? 'translateX(0)' : 'translateX(100%)';
      document.getElementById('cart-overlay').classList.toggle('hidden', !_cartOpen);
    }

    function addToCart() {
      if (!_currentProduct) return;
      const size = document.querySelector('.size-btn.selected')?.textContent || 'M';
      const existing = _cart.find(item => item.id === _currentProduct.id && item.size === size);
      if (existing) { existing.qty += _currentQty; }
      else { _cart.push({..._currentProduct, size, qty:_currentQty}); }
      renderCart();
      showToast('Đã thêm vào giỏ hàng');
    }

    function removeCartItem(idx) {
      _cart.splice(idx, 1);
      renderCart();
    }

    function renderCart() {
      const total = _cart.reduce((s,i) => s + i.numPrice * i.qty, 0);
      const totalItems = _cart.reduce((s,i) => s + i.qty, 0);
      const badge = document.getElementById('cart-badge');
      badge.textContent = totalItems;
      badge.classList.toggle('hidden', totalItems === 0);
      document.getElementById('cart-total').textContent = total.toLocaleString('vi-VN') + ' ₫';

      const container = document.getElementById('cart-items');
      const empty = document.getElementById('cart-empty');
      if (_cart.length === 0) {
        empty.classList.remove('hidden');
        container.querySelectorAll('.cart-item').forEach(el => el.remove());
      } else {
        empty.classList.add('hidden');
        container.innerHTML = '<p id="cart-empty" class="hidden"></p>' + _cart.map((item, i) => `
          <div class="cart-item flex gap-3 mb-4 pb-4 border-b border-secondary">
            <div class="w-14 flex-shrink-0" style="aspect-ratio:3/4;background:#F2F2F2;overflow:hidden;">
              <img src="${item.img}" alt="${item.name}" class="w-full h-full object-cover" style="object-position:top;">
            </div>
            <div class="flex-1 min-w-0">
              <p class="font-heading text-sm font-medium text-brand-dark leading-tight">${item.name}</p>
              <p class="font-body text-[11px] text-secondary-dark mt-0.5">Size ${item.size} × ${item.qty}</p>
              <p class="font-body text-sm text-accent mt-1">${(item.numPrice*item.qty).toLocaleString('vi-VN')} ₫</p>
            </div>
            <button onclick="removeCartItem(${i})" aria-label="Xóa"
                    class="text-secondary-dark hover:text-brand-dark transition-colors duration-200 self-start flex-shrink-0">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round">
                <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
              </svg>
            </button>
          </div>
        `).join('');
      }
    }

    // === CHECKOUT ===
    function goCheckout() {
      if (_cartOpen) toggleCart();
      navigateTo('checkout');
    }

    function initCheckout() {
      _checkoutStep = 1;
      _selectedPayment = 'cod';
      renderCheckoutStep();
      renderCheckoutSummary();
      // Pre-fill if logged in
      if (_user) {
        const n = document.getElementById('co-name');
        const e = document.getElementById('co-email');
        const p = document.getElementById('co-phone');
        if (n && !n.value) n.value = _user.name || '';
        if (e && !e.value) e.value = _user.email || '';
        if (p && !p.value) p.value = _user.phone || '';
      }
    }

    function renderCheckoutStep() {
      [1,2,3].forEach(i => {
        document.getElementById(`checkout-step-${i}`).classList.toggle('active', i === _checkoutStep);
        const dot = document.getElementById(`step-dot-${i}`);
        dot.classList.remove('active','done');
        if (i === _checkoutStep) dot.classList.add('active');
        else if (i < _checkoutStep) dot.classList.add('done');
      });
      [1,2].forEach(i => {
        const line = document.getElementById(`step-line-${i}`);
        line.classList.toggle('done', i < _checkoutStep);
      });
    }

    function renderCheckoutSummary() {
      const total = _cart.reduce((s,i) => s + i.numPrice * i.qty, 0);
      const itemsHTML = _cart.map(i => `
        <div class="flex gap-3 items-start">
          <div class="w-10 flex-shrink-0" style="aspect-ratio:3/4;overflow:hidden;background:#E2E2E2;">
            <img src="${i.img}" alt="${i.name}" class="w-full h-full object-cover" style="object-position:top;">
          </div>
          <div class="flex-1">
            <p class="font-body text-[12px] text-brand-dark leading-snug">${i.name}</p>
            <p class="font-body text-[11px] text-brand-dark/45">Size ${i.size} × ${i.qty}</p>
          </div>
          <span class="font-body text-[12px] text-brand-dark whitespace-nowrap">${(i.numPrice*i.qty).toLocaleString('vi-VN')} ₫</span>
        </div>
      `).join('');
      ['checkout-summary-1','checkout-summary-2'].forEach(id => {
        const el = document.getElementById(id);
        if (el) el.innerHTML = itemsHTML;
      });
      const totalStr = total.toLocaleString('vi-VN') + ' ₫';
      ['checkout-total-1','checkout-total-2','checkout-subtotal'].forEach(id => {
        const el = document.getElementById(id);
        if (el) el.textContent = totalStr;
      });
    }

    function nextCheckoutStep(e) {
      if (e) e.preventDefault();
      // Save address data
      _checkoutData = {
        name:     document.getElementById('co-name').value.trim(),
        phone:    document.getElementById('co-phone').value.trim(),
        email:    document.getElementById('co-email').value.trim(),
        address:  document.getElementById('co-address').value.trim(),
        city:     document.getElementById('co-city').value,
        district: document.getElementById('co-district').value.trim(),
        note:     document.getElementById('co-note').value.trim(),
      };
      const addrText = `${_checkoutData.name} · ${_checkoutData.phone}\n${_checkoutData.address}${_checkoutData.district?', '+_checkoutData.district:''}, ${_checkoutData.city}`;
      const addrEl = document.getElementById('checkout-address-text');
      if (addrEl) addrEl.textContent = addrText;
      _checkoutStep = 2;
      renderCheckoutStep();
      renderCheckoutSummary();
      window.scrollTo({top:0,behavior:'instant'});
    }

    function prevCheckoutStep() {
      _checkoutStep = Math.max(1, _checkoutStep - 1);
      renderCheckoutStep();
      window.scrollTo({top:0,behavior:'instant'});
    }

    function selectPayment(method) {
      _selectedPayment = method;
      ['cod','bank'].forEach(m => {
        document.getElementById('pay-' + m).classList.toggle('selected', m === method);
      });
      document.getElementById('bank-info').classList.toggle('hidden', method !== 'bank');
    }

    function placeOrder() {
      const total = _cart.reduce((s,i) => s + i.numPrice * i.qty, 0);
      const orderNum = '#OM' + Math.floor(100000 + Math.random() * 900000);
      const now = new Date();
      const dateStr = now.toLocaleDateString('vi-VN', {day:'2-digit',month:'2-digit',year:'numeric'});
      const order = {
        number: orderNum, date: dateStr, total,
        items: _cart.map(i => ({...i})),
        address: _checkoutData, payment: _selectedPayment,
      };
      _orders.unshift(order);

      // Render confirmation
      document.getElementById('order-number-display').textContent = `Mã đơn hàng: ${orderNum} · ${dateStr}`;
      document.getElementById('order-summary-final').innerHTML = order.items.map(i => `
        <div class="flex justify-between font-body text-[13px]">
          <span class="text-brand-dark/70">${i.name} (${i.size}) × ${i.qty}</span>
          <span class="text-brand-dark">${(i.numPrice*i.qty).toLocaleString('vi-VN')} ₫</span>
        </div>
      `).join('') + `<div class="border-t border-secondary mt-3 pt-3 flex justify-between">
        <span class="font-body text-[11px] uppercase tracking-[0.1em] text-brand-dark/50">Tổng</span>
        <span class="font-heading font-semibold text-brand-dark">${total.toLocaleString('vi-VN')} ₫</span>
      </div>`;
      document.getElementById('order-address-text').textContent =
        `${_checkoutData.name} · ${_checkoutData.phone}\n${_checkoutData.address}${_checkoutData.district?', '+_checkoutData.district:''}, ${_checkoutData.city}`;

      _cart = [];
      renderCart();
      _checkoutStep = 3;
      renderCheckoutStep();
      window.scrollTo({top:0,behavior:'instant'});
      showToast('Đơn hàng đã được đặt thành công!');
    }

    // === INIT ===
    document.addEventListener('DOMContentLoaded', () => {
      const page = location.hash.slice(1) || 'home';
      navigateTo(page);
      updateAuthUI();
    });
  </script>
</body>
</html>
